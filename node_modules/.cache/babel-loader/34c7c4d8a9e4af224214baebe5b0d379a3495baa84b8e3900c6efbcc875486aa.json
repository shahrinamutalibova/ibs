{"ast":null,"code":"import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { substitute, createDOM } from '@antv/util';\nimport { Component } from '../../core';\nimport { BBox, applyStyleSheet } from '../../util';\nimport { getClassNames, getDefaultTooltipStyle } from './constant';\nvar Tooltip = /** @class */function (_super) {\n  __extends(Tooltip, _super);\n  function Tooltip(options) {\n    var _this = this;\n    var _a, _b;\n    var prefixCls = (_b = (_a = options.style) === null || _a === void 0 ? void 0 : _a.template) === null || _b === void 0 ? void 0 : _b.prefixCls;\n    var CLASS_NAME = getClassNames(prefixCls);\n    _this = _super.call(this, options, {\n      data: [],\n      x: 0,\n      y: 0,\n      visibility: 'visible',\n      title: '',\n      position: 'bottom-right',\n      offset: [5, 5],\n      enterable: false,\n      container: {\n        x: 0,\n        y: 0\n      },\n      bounding: null,\n      template: {\n        prefixCls: '',\n        container: \"<div class=\\\"\".concat(CLASS_NAME.CONTAINER, \"\\\"></div>\"),\n        title: \"<div class=\\\"\".concat(CLASS_NAME.TITLE, \"\\\"></div>\"),\n        item: \"<li class=\\\"\".concat(CLASS_NAME.LIST_ITEM, \"\\\" data-index={index}>\\n        <span class=\\\"\").concat(CLASS_NAME.NAME, \"\\\">\\n          <span class=\\\"\").concat(CLASS_NAME.MARKER, \"\\\" style=\\\"background:{color}\\\"></span>\\n          <span class=\\\"\").concat(CLASS_NAME.NAME_LABEL, \"\\\" title=\\\"{name}\\\">{name}</span>\\n        </span>\\n        <span class=\\\"\").concat(CLASS_NAME.VALUE, \"\\\" title=\\\"{value}\\\">{value}</span>\\n      </li>\")\n      },\n      style: getDefaultTooltipStyle(prefixCls)\n    }) || this;\n    _this.timestamp = -1;\n    _this.prevCustomContentKey = _this.attributes.contentKey;\n    _this.initShape();\n    _this.render(_this.attributes, _this);\n    return _this;\n  }\n  Object.defineProperty(Tooltip.prototype, \"HTMLTooltipElement\", {\n    get: function () {\n      return this.element;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Tooltip.prototype.getContainer = function () {\n    return this.element;\n  };\n  Object.defineProperty(Tooltip.prototype, \"elementSize\", {\n    get: function () {\n      var width = this.element.offsetWidth;\n      var height = this.element.offsetHeight;\n      return {\n        width: width,\n        height: height\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Tooltip.prototype, \"HTMLTooltipItemsElements\", {\n    get: function () {\n      var _a = this.attributes,\n        data = _a.data,\n        template = _a.template;\n      return data.map(function (_a, idx) {\n        var _b = _a.name,\n          name = _b === void 0 ? '' : _b,\n          _c = _a.color,\n          color = _c === void 0 ? 'black' : _c,\n          index = _a.index,\n          rest = __rest(_a, [\"name\", \"color\", \"index\"]);\n        var datum = __assign({\n          name: name,\n          color: color,\n          index: index !== null && index !== void 0 ? index : idx\n        }, rest);\n        return createDOM(substitute(template.item, datum));\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Tooltip.prototype.render = function (attributes, container) {\n    this.renderHTMLTooltipElement();\n    this.updatePosition();\n  };\n  Tooltip.prototype.destroy = function () {\n    var _a;\n    (_a = this.element) === null || _a === void 0 ? void 0 : _a.remove();\n    _super.prototype.destroy.call(this);\n  };\n  /**\n   * 如果设置了坐标值，显示过程中会立即更新位置并关闭过渡动画\n   */\n  Tooltip.prototype.show = function (x, y) {\n    var _this = this;\n    if (x !== undefined && y !== undefined) {\n      var isToggle = this.element.style.visibility === 'hidden';\n      var setPosition = function () {\n        _this.attributes.x = x !== null && x !== void 0 ? x : _this.attributes.x;\n        _this.attributes.y = y !== null && y !== void 0 ? y : _this.attributes.y;\n        _this.updatePosition();\n      };\n      // 只有从 hidden 状态变为 visible 状态时才需要关闭过渡动画\n      isToggle ? this.closeTransition(setPosition) : setPosition();\n    }\n    this.element.style.visibility = 'visible';\n  };\n  /**\n   * 如果 hide 时传入了坐标值，那么只有当鼠标不在 tooltip 上时才会隐藏\n   * 对于 enterable = true 的时候，需要传入 x y，为了避免问题，建议上层在使用的时候，都传入 x y\n   * @param x\n   * @param y\n   * @returns\n   */\n  Tooltip.prototype.hide = function (x, y) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    var enterable = this.attributes.enterable;\n    // 如果当前鼠标在 tooltip 上，则不隐藏\n    if (enterable && this.isCursorEntered(x, y)) return;\n    this.element.style.visibility = 'hidden';\n  };\n  /**\n   * 初始化容器\n   */\n  Tooltip.prototype.initShape = function () {\n    var template = this.attributes.template;\n    this.element = createDOM(template.container);\n    if (this.id) this.element.setAttribute('id', this.id);\n  };\n  Tooltip.prototype.renderCustomContent = function () {\n    if (this.prevCustomContentKey !== undefined && this.prevCustomContentKey === this.attributes.contentKey) return;\n    this.prevCustomContentKey = this.attributes.contentKey;\n    var content = this.attributes.content;\n    if (!content) return;\n    if (typeof content === 'string') this.element.innerHTML = content;else this.element.replaceChildren(content);\n  };\n  /**\n   * 更新 HTML 上的内容\n   */\n  Tooltip.prototype.renderHTMLTooltipElement = function () {\n    var _a, _b;\n    var _c = this.attributes,\n      template = _c.template,\n      title = _c.title,\n      enterable = _c.enterable,\n      style = _c.style,\n      content = _c.content;\n    var CLASS_NAME = getClassNames(template.prefixCls);\n    var container = this.element;\n    this.element.style.pointerEvents = enterable ? 'auto' : 'none';\n    if (content) this.renderCustomContent();else {\n      if (title) {\n        container.innerHTML = template.title;\n        container.getElementsByClassName(CLASS_NAME.TITLE)[0].innerHTML = title;\n      } else (_b = (_a = container.getElementsByClassName(CLASS_NAME.TITLE)) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.remove();\n      var itemsElements = this.HTMLTooltipItemsElements;\n      var ul = document.createElement('ul');\n      ul.className = CLASS_NAME.LIST;\n      ul.replaceChildren.apply(ul, __spreadArray([], __read(itemsElements), false));\n      var list = this.element.querySelector(\".\".concat(CLASS_NAME.LIST));\n      if (list) list.replaceWith(ul);else container.appendChild(ul);\n    }\n    applyStyleSheet(container, style);\n  };\n  /**\n   * 根据 position 和指针位置，计算出 tooltip 相对于指针的偏移量\n   * @param assignPosition {TooltipPosition} tooltip相对于指针的位置，不指定时使用默认参数\n   */\n  Tooltip.prototype.getRelativeOffsetFromCursor = function (assignPosition) {\n    var _a = this.attributes,\n      position = _a.position,\n      offset = _a.offset;\n    var interPosition = assignPosition || position;\n    var finalPosition = interPosition.split('-');\n    var positionScore = {\n      left: [-1, 0],\n      right: [1, 0],\n      top: [0, -1],\n      bottom: [0, 1]\n    };\n    var _b = this.elementSize,\n      width = _b.width,\n      height = _b.height;\n    var absolutelyOffset = [-width / 2, -height / 2];\n    finalPosition.forEach(function (pos) {\n      var _a = __read(absolutelyOffset, 2),\n        abs1 = _a[0],\n        abs2 = _a[1];\n      var _b = __read(positionScore[pos], 2),\n        pos1 = _b[0],\n        pos2 = _b[1];\n      absolutelyOffset = [abs1 + (width / 2 + offset[0]) * pos1, abs2 + (height / 2 + offset[1]) * pos2];\n    });\n    return absolutelyOffset;\n  };\n  /**\n   * 将相对于指针的偏移量生效到dom元素上\n   */\n  Tooltip.prototype.setOffsetPosition = function (_a) {\n    var _b = __read(_a, 2),\n      offsetX = _b[0],\n      offsetY = _b[1];\n    var _c = this.attributes,\n      _d = _c.x,\n      x = _d === void 0 ? 0 : _d,\n      _e = _c.y,\n      y = _e === void 0 ? 0 : _e,\n      _f = _c.container,\n      cx = _f.x,\n      cy = _f.y;\n    this.element.style.left = \"\".concat(+x + cx + offsetX, \"px\");\n    this.element.style.top = \"\".concat(+y + cy + offsetY, \"px\");\n  };\n  /**\n   * 更新tooltip的位置\n   */\n  Tooltip.prototype.updatePosition = function () {\n    var _a = this.attributes.showDelay,\n      showDelay = _a === void 0 ? 60 : _a;\n    var currentTimestamp = Date.now();\n    if (this.timestamp > 0 && currentTimestamp - this.timestamp < showDelay) return;\n    this.timestamp = currentTimestamp;\n    // 尝试当前的位置使用默认 position 能否放下\n    // 如果不能，则改变取溢出边的反向 position\n    /**\n     * 默认位置\n     *    ⬇️\n     * 计算自动调整位置\n     *    ⬇️\n     * 实际摆放位置\n     */\n    this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()));\n  };\n  /**\n   * 计算自动调整位置后的相对位置\n   * @param offsetX 根据position计算的横向偏移量\n   * @param offsetY 根据position计算的纵向偏移量\n   */\n  Tooltip.prototype.autoPosition = function (_a) {\n    var _b = __read(_a, 2),\n      offsetX = _b[0],\n      offsetY = _b[1];\n    var _c = this.attributes,\n      cursorX = _c.x,\n      cursorY = _c.y,\n      bounding = _c.bounding,\n      position = _c.position;\n    // 如果没有设置 bounds，那么意思就是不限制空间\n    if (!bounding) return [offsetX, offsetY];\n    // 更新前的位置和宽度\n    var _d = this.element,\n      offsetWidth = _d.offsetWidth,\n      offsetHeight = _d.offsetHeight;\n    // 预期放置的位置\n    var _e = __read([+cursorX + offsetX, +cursorY + offsetY], 2),\n      expectLeft = _e[0],\n      expectTop = _e[1];\n    // 反方向\n    var inversion = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top'\n    };\n    // 各个边界是否超出容器边界\n    var boundingX = bounding.x,\n      boundingY = bounding.y,\n      boundingWidth = bounding.width,\n      boundingHeight = bounding.height;\n    var edgeCompare = {\n      left: expectLeft < boundingX,\n      right: expectLeft + offsetWidth > boundingX + boundingWidth,\n      top: expectTop < boundingY,\n      bottom: expectTop + offsetHeight > boundingY + boundingHeight\n    };\n    // 修正的位置\n    var correctivePosition = [];\n    // 判断是否超出边界\n    position.split('-').forEach(function (pos) {\n      // 如果在当前方向超出边界，则设置其反方向\n      if (edgeCompare[pos]) correctivePosition.push(inversion[pos]);else correctivePosition.push(pos);\n    });\n    var correctedPositionString = correctivePosition.join('-');\n    return this.getRelativeOffsetFromCursor(correctedPositionString);\n  };\n  Tooltip.prototype.isCursorEntered = function (clientX, clientY) {\n    // 是可捕获的，并且点在 tooltip dom 上\n    if (this.element) {\n      var _a = this.element.getBoundingClientRect(),\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n      // const { container } = this.attributes;\n      // const { x: cx, y: cy } = container;\n      // console.log(1113, [clientX, clientY], [x, y, width, height], [cx, cy], new BBox(x - cx, y - cy, width, height).isPointIn(cursorX, cursorY));\n      return new BBox(x, y, width, height).isPointIn(clientX, clientY);\n    }\n    return false;\n  };\n  Tooltip.prototype.closeTransition = function (callback) {\n    var _this = this;\n    var transition = this.element.style.transition;\n    this.element.style.transition = 'none';\n    callback();\n    setTimeout(function () {\n      _this.element.style.transition = transition;\n    }, 10);\n  };\n  Tooltip.tag = 'tooltip';\n  return Tooltip;\n}(Component);\nexport { Tooltip };","map":{"version":3,"names":["substitute","createDOM","Component","BBox","applyStyleSheet","getClassNames","getDefaultTooltipStyle","Tooltip","_super","__extends","options","_this","prefixCls","_b","_a","style","template","CLASS_NAME","call","data","x","y","visibility","title","position","offset","enterable","container","bounding","concat","CONTAINER","TITLE","item","LIST_ITEM","NAME","MARKER","NAME_LABEL","VALUE","timestamp","prevCustomContentKey","attributes","contentKey","initShape","render","Object","defineProperty","prototype","get","element","getContainer","width","offsetWidth","height","offsetHeight","map","idx","name","_c","color","index","rest","__rest","datum","__assign","renderHTMLTooltipElement","updatePosition","destroy","remove","show","undefined","isToggle","setPosition","closeTransition","hide","isCursorEntered","id","setAttribute","renderCustomContent","content","innerHTML","replaceChildren","pointerEvents","getElementsByClassName","itemsElements","HTMLTooltipItemsElements","ul","document","createElement","className","LIST","apply","__spreadArray","__read","list","querySelector","replaceWith","appendChild","getRelativeOffsetFromCursor","assignPosition","interPosition","finalPosition","split","positionScore","left","right","top","bottom","elementSize","absolutelyOffset","forEach","pos","abs1","abs2","pos1","pos2","setOffsetPosition","offsetX","offsetY","_d","_e","_f","cx","cy","showDelay","currentTimestamp","Date","now","autoPosition","cursorX","cursorY","expectLeft","expectTop","inversion","boundingX","boundingY","boundingWidth","boundingHeight","edgeCompare","correctivePosition","push","correctedPositionString","join","clientX","clientY","getBoundingClientRect","isPointIn","callback","transition","setTimeout","tag"],"sources":["ui/tooltip/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}