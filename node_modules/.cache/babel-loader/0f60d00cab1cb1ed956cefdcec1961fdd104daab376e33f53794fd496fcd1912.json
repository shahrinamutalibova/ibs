{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { lowerFirst, upperFirst, isPlainObject } from '@antv/util';\nexport function identity(x) {\n  return x;\n}\n/**\n * Composes functions from left to right.\n */\nexport function compose(fns) {\n  return fns.reduce((composed, fn) => (x, ...args) => fn(composed(x, ...args), ...args), identity);\n}\n/**\n * Composes single-argument async functions from left to right.\n */\nexport function composeAsync(fns) {\n  return fns.reduce((composed, fn) => x => __awaiter(this, void 0, void 0, function* () {\n    const value = yield composed(x);\n    return fn(value);\n  }), identity);\n}\nexport function capitalizeFirst(str) {\n  return str.replace(/( |^)[a-z]/g, L => L.toUpperCase());\n}\nexport function error(message = '') {\n  throw new Error(message);\n}\nexport function copyAttributes(target, source) {\n  const {\n    attributes\n  } = source;\n  const exclude = new Set(['id', 'className']);\n  for (const [key, value] of Object.entries(attributes)) {\n    if (!exclude.has(key)) {\n      // @todo Fix in @antv/g\n      if (key === 'transform') {\n        target.attr(key, '');\n        target.attr(key, value);\n      } else {\n        target.attr(key, value);\n      }\n    }\n  }\n}\nexport function defined(x) {\n  return x !== undefined && x !== null && !Number.isNaN(x);\n}\nexport function random(a, b) {\n  return a + (b - a) * Math.random();\n}\nexport function useMemo(compute) {\n  const map = new Map();\n  return key => {\n    if (map.has(key)) return map.get(key);\n    const value = compute(key);\n    map.set(key, value);\n    return value;\n  };\n}\nexport function appendTransform(node, transform) {\n  const {\n    transform: preTransform\n  } = node.style;\n  const unset = d => d === 'none' || d === undefined;\n  const prefix = unset(preTransform) ? '' : preTransform;\n  node.style.transform = `${prefix} ${transform}`.trimStart();\n}\nexport function subObject(obj, prefix) {\n  return maybeSubObject(obj, prefix) || {};\n}\nexport function maybeSubObject(obj, prefix) {\n  const entries = Object.entries(obj || {}).filter(([key]) => key.startsWith(prefix)).map(([key, value]) => [lowerFirst(key.replace(prefix, '').trim()), value]).filter(([key]) => !!key);\n  return entries.length === 0 ? null : Object.fromEntries(entries);\n}\nexport function prefixObject(obj, prefix) {\n  return Object.fromEntries(Object.entries(obj).map(([key, value]) => {\n    return [`${prefix}${upperFirst(key)}`, value];\n  }));\n}\nexport function filterPrefixObject(obj, prefix) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => prefix.find(p => key.startsWith(p))));\n}\nexport function omitPrefixObject(obj, ...prefixes) {\n  return Object.fromEntries(Object.entries(obj).filter(([key]) => prefixes.every(prefix => !key.startsWith(prefix))));\n}\nexport function maybePercentage(x, size) {\n  if (x === undefined) return null;\n  if (typeof x === 'number') return x;\n  const px = +x.replace('%', '');\n  return Number.isNaN(px) ? null : px / 100 * size;\n}\nexport function isStrictObject(d) {\n  return typeof d === 'object' && !(d instanceof Date) && d !== null && !Array.isArray(d);\n}\nexport function isUnset(value) {\n  return value === null || value === false;\n}\nexport function deepAssign(dist, src, maxLevel = 5, level = 0) {\n  if (level >= maxLevel) return;\n  for (const key of Object.keys(src)) {\n    const value = src[key];\n    if (!isPlainObject(value) || !isPlainObject(dist[key])) {\n      dist[key] = value;\n    } else {\n      deepAssign(dist[key], value, maxLevel, level + 1);\n    }\n  }\n  return dist;\n}","map":{"version":3,"names":["lowerFirst","upperFirst","isPlainObject","identity","x","compose","fns","reduce","composed","fn","args","composeAsync","__awaiter","value","capitalizeFirst","str","replace","L","toUpperCase","error","message","Error","copyAttributes","target","source","attributes","exclude","Set","key","Object","entries","has","attr","defined","undefined","Number","isNaN","random","a","b","Math","useMemo","compute","map","Map","get","set","appendTransform","node","transform","preTransform","style","unset","d","prefix","trimStart","subObject","obj","maybeSubObject","filter","startsWith","trim","length","fromEntries","prefixObject","filterPrefixObject","find","p","omitPrefixObject","prefixes","every","maybePercentage","size","px","isStrictObject","Date","Array","isArray","isUnset","deepAssign","dist","src","maxLevel","level","keys"],"sources":["utils/helper.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}