{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\IBS-adminpage\\\\src\\\\view\\\\app\\\\Post-Modal\\\\addPostModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Button, Drawer, Form, Input } from 'antd';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateState } from \"../../../redux/reducers\";\nimport UploadImages from \"../../../compoents/uploadImage\";\nimport { addAnnouncement, editAnnouncements } from \"../../../redux/actions/app\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddPostModal(props) {\n  _s();\n  const {\n    isModal,\n    isLoading,\n    editData\n  } = useSelector(state => state.app);\n  const [image, setImage] = useState(null);\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const toggleModal = () => dispatch(updateState({\n    isModal: !isModal\n  }));\n  console.log(editData);\n  const onFinish = value => {\n    dispatch(updateState({\n      isLoading: true\n    }));\n    if (editData !== null && editData !== void 0 && editData.id) {\n      dispatch(editAnnouncements({\n        ...value,\n        image,\n        id: editData.id\n      }));\n    } else {\n      dispatch(addAnnouncement({\n        ...value,\n        image\n      }));\n    }\n  };\n  useEffect(() => {\n    if (editData !== null && editData !== void 0 && editData.id) {\n      form.setFieldsValue(editData);\n      setImage(editData.image);\n    }\n    if (!isModal) {\n      setImage(null);\n      form.resetFields();\n      dispatch(updateState({\n        editData: {}\n      }));\n    }\n  }, [isModal]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: toggleModal,\n      className: 'addBtn',\n      children: \" Post yuklash \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n      open: isModal,\n      onClose: toggleModal,\n      extra: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => form.submit(),\n        loading: isLoading,\n        className: 'addBtn',\n        children: \" Saqlash \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 65\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(UploadImages, {\n          image: image,\n          setImage: setImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        onFinish: onFinish,\n        style: {\n          marginTop: '20px'\n        },\n        layout: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          name: 'title',\n          label: 'Post nomi',\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: 'description',\n          label: 'Post haqida',\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input.TextArea, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n}\n_s(AddPostModal, \"UnxYF1B2aBhSPWnA/rmsWQBCgfM=\", false, function () {\n  return [useSelector, Form.useForm, useDispatch];\n});\n_c = AddPostModal;\nexport default AddPostModal;\nvar _c;\n$RefreshReg$(_c, \"AddPostModal\");","map":{"version":3,"names":["React","useEffect","useState","Button","Drawer","Form","Input","useDispatch","useSelector","updateState","UploadImages","addAnnouncement","editAnnouncements","jsxDEV","_jsxDEV","AddPostModal","props","_s","isModal","isLoading","editData","state","app","image","setImage","form","useForm","dispatch","toggleModal","console","log","onFinish","value","id","setFieldsValue","resetFields","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","open","onClose","extra","submit","loading","style","marginTop","layout","Item","name","label","rules","required","TextArea","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/IBS-adminpage/src/view/app/Post-Modal/addPostModal.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Button, Drawer, Form, Input} from 'antd';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {updateState} from \"../../../redux/reducers\";\r\nimport UploadImages from \"../../../compoents/uploadImage\";\r\nimport {addAnnouncement, editAnnouncements} from \"../../../redux/actions/app\";\r\n\r\nfunction AddPostModal(props) {\r\n    const {isModal, isLoading, editData} = useSelector(state => state.app);\r\n    const [image, setImage] = useState(null)\r\n\r\n    const [form] = Form.useForm();\r\n    const dispatch = useDispatch();\r\n    const toggleModal = () => dispatch(updateState({isModal: !isModal}));\r\n    console.log(editData)\r\n    const onFinish = value => {\r\n        dispatch(updateState({isLoading:true}));\r\n        if (editData?.id){\r\n            dispatch(editAnnouncements({...value, image, id:editData.id}));\r\n        } else {\r\n            dispatch(addAnnouncement({...value, image}));\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n\r\n        if (editData?.id){\r\n            form.setFieldsValue(editData)\r\n            setImage(editData.image)\r\n        }\r\n        if (!isModal){\r\n            setImage(null)\r\n            form.resetFields()\r\n            dispatch(updateState({editData: {}}))\r\n        }\r\n    },[isModal])\r\n\r\n    return (\r\n        <div>\r\n            <Button onClick={toggleModal} className={'addBtn'}> Post yuklash </Button>\r\n            <Drawer open={isModal} onClose={toggleModal} extra={<Button onClick={()=>form.submit()} loading={isLoading} className={'addBtn'}> Saqlash </Button>}>\r\n                <div><UploadImages image={image} setImage={setImage}/></div>\r\n                <Form form={form} onFinish={onFinish} style={{marginTop: '20px'}} layout={\"vertical\"}>\r\n                    <Form.Item name={'title'} label={'Post nomi'} rules={[{required:true}]}>\r\n                        <Input/>\r\n                    </Form.Item>\r\n                    <Form.Item name={'description'} label={'Post haqida'} rules={[{required:true}]}>\r\n                        <Input.TextArea/>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Drawer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddPostModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}