{"ast":null,"code":"import { __assign, __extends, __read, __rest } from \"tslib\";\nimport { Component } from '../../core';\nimport { classNames, ifShow, select, splitStyle, subStyleProps } from '../../util';\nimport { HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nvar CLASS_NAMES = classNames({\n  labelGroup: 'label-group',\n  label: 'label',\n  iconGroup: 'icon-group',\n  icon: 'icon',\n  iconRect: 'icon-rect',\n  iconLine: 'icon-line'\n}, 'handle');\nvar HandleIcon = /** @class */function (_super) {\n  __extends(HandleIcon, _super);\n  function HandleIcon() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HandleIcon.prototype.render = function (attributes, container) {\n    var _a = attributes.size,\n      size = _a === void 0 ? 10 : _a,\n      _b = attributes.radius,\n      radius = _b === void 0 ? size / 4 : _b,\n      orientation = attributes.orientation,\n      iconStyle = __rest(attributes, [\"size\", \"radius\", \"orientation\"]);\n    // 默认手柄\n    var width = size;\n    var height = width * 2.4;\n    var rect = select(container).maybeAppendByClassName(CLASS_NAMES.iconRect, 'rect').styles(__assign(__assign({}, iconStyle), {\n      width: width,\n      height: height,\n      radius: radius,\n      x: -width / 2,\n      y: -height / 2\n    }));\n    var x1 = 1 / 3 * width;\n    var x2 = 2 / 3 * width;\n    var y1 = 1 / 4 * height;\n    var y2 = 3 / 4 * height;\n    rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-1\"), 'line').styles(__assign({\n      x1: x1,\n      x2: x1,\n      y1: y1,\n      y2: y2\n    }, iconStyle));\n    rect.maybeAppendByClassName(\"\".concat(CLASS_NAMES.iconLine, \"-2\"), 'line').styles(__assign({\n      x1: x2,\n      x2: x2,\n      y1: y1,\n      y2: y2\n    }, iconStyle));\n    rect.node().setOrigin(width / 2, height / 2);\n    if (orientation === 'vertical') container.setLocalEulerAngles(90);else container.setLocalEulerAngles(0);\n  };\n  return HandleIcon;\n}(Component);\nvar Handle = /** @class */function (_super) {\n  __extends(Handle, _super);\n  function Handle(options) {\n    return _super.call(this, options, HANDLE_DEFAULT_CFG) || this;\n  }\n  Handle.prototype.renderLabel = function (container) {\n    var _this = this;\n    var showLabel = this.attributes.showLabel;\n    var _a = subStyleProps(this.attributes, 'label'),\n      transform = _a.transform,\n      style = __rest(_a, [\"transform\"]);\n    var _b = __read(splitStyle(style, []), 2),\n      labelStyle = _b[0],\n      groupStyle = _b[1];\n    var labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n    // @ts-ignore\n    var _c = __assign(__assign({}, HANDLE_LABEL_DEFAULT_CFG), labelStyle),\n      text = _c.text,\n      rest = __rest(_c, [\"text\"]);\n    ifShow(!!showLabel, labelGroup, function (group) {\n      _this.label = group.maybeAppendByClassName(CLASS_NAMES.label, 'text').styles(__assign(__assign({}, rest), {\n        transform: transform,\n        text: \"\".concat(text)\n      }));\n      /** avoid trigger event on label */\n      _this.label.on('mousedown', function (e) {\n        e.stopPropagation();\n      });\n      _this.label.on('touchstart', function (e) {\n        e.stopPropagation();\n      });\n    });\n  };\n  Handle.prototype.renderIcon = function (container) {\n    var _a = this.attributes,\n      orientation = _a.orientation,\n      type = _a.type;\n    var iconStyle = __assign(__assign({\n      orientation: orientation\n    }, HANDLE_ICON_DEFAULT_CFG), subStyleProps(this.attributes, 'icon'));\n    var _b = this.attributes.iconShape,\n      iconShape = _b === void 0 ? function () {\n        return new HandleIcon({\n          style: iconStyle\n        });\n      } : _b;\n    var iconGroup = select(container).maybeAppendByClassName(CLASS_NAMES.iconGroup, 'g');\n    iconGroup.selectAll(CLASS_NAMES.icon.class).data([iconShape]).join(function (enter) {\n      return enter.append(typeof iconShape === 'string' ? iconShape : function () {\n        return iconShape(type);\n      }).attr('className', CLASS_NAMES.icon.name);\n    }, function (update) {\n      return update.update(iconStyle);\n    }, function (exit) {\n      return exit.remove();\n    });\n  };\n  Handle.prototype.render = function (attributes, container) {\n    this.renderIcon(container);\n    this.renderLabel(container);\n  };\n  return Handle;\n}(Component);\nexport { Handle };","map":{"version":3,"names":["Component","classNames","ifShow","select","splitStyle","subStyleProps","HANDLE_DEFAULT_CFG","HANDLE_ICON_DEFAULT_CFG","HANDLE_LABEL_DEFAULT_CFG","CLASS_NAMES","labelGroup","label","iconGroup","icon","iconRect","iconLine","HandleIcon","_super","__extends","prototype","render","attributes","container","_a","size","_b","radius","orientation","iconStyle","__rest","width","height","rect","maybeAppendByClassName","styles","__assign","x","y","x1","x2","y1","y2","concat","node","setOrigin","setLocalEulerAngles","Handle","options","call","renderLabel","_this","showLabel","transform","style","__read","labelStyle","groupStyle","_c","text","rest","group","on","e","stopPropagation","renderIcon","type","iconShape","selectAll","class","data","join","enter","append","attr","name","update","exit","remove"],"sources":["ui/slider/handle.ts"],"sourcesContent":[null],"mappings":";AAAA,SAA2BA,SAAS,QAA0B,YAAY;AAI1E,SAASC,UAAU,EAAEC,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAEC,aAAa,QAAQ,YAAY;AAClF,SAASC,kBAAkB,EAAEC,uBAAuB,EAAEC,wBAAwB,QAAQ,YAAY;AAwBlG,IAAMC,WAAW,GAAGR,UAAU,CAC5B;EACES,UAAU,EAAE,aAAa;EACzBC,KAAK,EAAE,OAAO;EACdC,SAAS,EAAE,YAAY;EACvBC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE,WAAW;EACrBC,QAAQ,EAAE;CACX,EACD,QAAQ,CACT;AAED,IAAAC,UAAA,0BAAAC,MAAA;EAAyBC,SAAA,CAAAF,UAAA,EAAAC,MAAA;EAAzB,SAAAD,WAAA;;EA8BA;EA7BEA,UAAA,CAAAG,SAAA,CAAAC,MAAM,GAAN,UAAOC,UAAoC,EAAEC,SAAwB;IAC3D,IAAAC,EAAA,GAA4DF,UAAU,CAAAG,IAA7D;MAATA,IAAI,GAAAD,EAAA,cAAG,EAAE,GAAAA,EAAA;MAAEE,EAAA,GAAiDJ,UAAU,CAAAK,MAA1C;MAAjBA,MAAM,GAAAD,EAAA,cAAGD,IAAI,GAAG,CAAC,GAAAC,EAAA;MAAEE,WAAW,GAAmBN,UAAU,CAAAM,WAA7B;MAAKC,SAAS,GAAAC,MAAA,CAAKR,UAAU,EAAxE,iCAA2D,CAAF;IAC/D;IACA,IAAMS,KAAK,GAAGN,IAAK;IACnB,IAAMO,MAAM,GAAGD,KAAK,GAAG,GAAG;IAE1B,IAAME,IAAI,GAAG7B,MAAM,CAACmB,SAAS,CAAC,CAC3BW,sBAAsB,CAACxB,WAAW,CAACK,QAAQ,EAAE,MAAM,CAAC,CACpDoB,MAAM,CAAAC,QAAA,CAAAA,QAAA,KACFP,SAAS;MACZE,KAAK,EAAAA,KAAA;MACLC,MAAM,EAAAA,MAAA;MACNL,MAAM,EAAAA,MAAA;MACNU,CAAC,EAAE,CAACN,KAAK,GAAG,CAAC;MACbO,CAAC,EAAE,CAACN,MAAM,GAAG;IAAC,GACd;IAEJ,IAAMO,EAAE,GAAI,CAAC,GAAG,CAAC,GAAIR,KAAK;IAC1B,IAAMS,EAAE,GAAI,CAAC,GAAG,CAAC,GAAIT,KAAK;IAC1B,IAAMU,EAAE,GAAI,CAAC,GAAG,CAAC,GAAIT,MAAM;IAC3B,IAAMU,EAAE,GAAI,CAAC,GAAG,CAAC,GAAIV,MAAM;IAE3BC,IAAI,CAACC,sBAAsB,CAAC,GAAAS,MAAA,CAAGjC,WAAW,CAACM,QAAQ,OAAI,EAAE,MAAM,CAAC,CAACmB,MAAM,CAAAC,QAAA;MAAGG,EAAE,EAAAA,EAAA;MAAEC,EAAE,EAAED,EAAE;MAAEE,EAAE,EAAAA,EAAA;MAAEC,EAAE,EAAAA;IAAA,GAAKb,SAAS,EAAG;IAC7GI,IAAI,CAACC,sBAAsB,CAAC,GAAAS,MAAA,CAAGjC,WAAW,CAACM,QAAQ,OAAI,EAAE,MAAM,CAAC,CAACmB,MAAM,CAAAC,QAAA;MAAGG,EAAE,EAAEC,EAAE;MAAEA,EAAE,EAAAA,EAAA;MAAEC,EAAE,EAAAA,EAAA;MAAEC,EAAE,EAAAA;IAAA,GAAKb,SAAS,EAAG;IAE7GI,IAAI,CAACW,IAAI,EAAE,CAACC,SAAS,CAACd,KAAK,GAAG,CAAC,EAAEC,MAAM,GAAG,CAAC,CAAC;IAC5C,IAAIJ,WAAW,KAAK,UAAU,EAAEL,SAAS,CAACuB,mBAAmB,CAAC,EAAE,CAAC,CAAC,KAC7DvB,SAAS,CAACuB,mBAAmB,CAAC,CAAC,CAAC;EACvC,CAAC;EACH,OAAA7B,UAAC;AAAD,CAAC,CA9BwBhB,SAAS;AAgClC,IAAA8C,MAAA,0BAAA7B,MAAA;EAA4BC,SAAA,CAAA4B,MAAA,EAAA7B,MAAA;EAK1B,SAAA6B,OAAYC,OAAsB;IAChC,OAAA9B,MAAK,CAAA+B,IAAA,OAACD,OAAO,EAAEzC,kBAAkB,CAAC;EACpC;EAEQwC,MAAA,CAAA3B,SAAA,CAAA8B,WAAW,GAAnB,UAAoB3B,SAAgB;IAApC,IAAA4B,KAAA;IACU,IAAAC,SAAS,GAAK,IAAI,CAAC9B,UAAU,CAAA8B,SAApB;IACjB,IAAM5B,EAAA,GAA0BlB,aAAa,CAAC,IAAI,CAACgB,UAAU,EAAE,OAAO,CAAC;MAA/D+B,SAAS,GAAA7B,EAAA,CAAA6B,SAAA;MAAKC,KAAK,GAAAxB,MAAA,CAAAN,EAAA,EAArB,aAAuB,CAA0C;IACjE,IAAAE,EAAA,GAAA6B,MAAA,CAA2BlD,UAAU,CAACiD,KAAK,EAAE,EAAE,CAAC;MAA/CE,UAAU,GAAA9B,EAAA;MAAE+B,UAAU,GAAA/B,EAAA,GAAyB;IAEtD,IAAMf,UAAU,GAAGP,MAAM,CAACmB,SAAS,CAAC,CAACW,sBAAsB,CAACxB,WAAW,CAACC,UAAU,EAAE,GAAG,CAAC,CAACwB,MAAM,CAACsB,UAAU,CAAC;IAE3G;IACA,IAAMC,EAAA,GAAAtB,QAAA,CAAAA,QAAA,KAAyB3B,wBAAwB,GAAK+C,UAAU,CAAE;MAAhEG,IAAI,GAAAD,EAAA,CAAAC,IAAA;MAAKC,IAAI,GAAA9B,MAAA,CAAA4B,EAAA,EAAf,QAAiB,CAAiD;IACxEvD,MAAM,CAAC,CAAC,CAACiD,SAAS,EAAEzC,UAAU,EAAE,UAACkD,KAAK;MACpCV,KAAI,CAACvC,KAAK,GAAGiD,KAAK,CAAC3B,sBAAsB,CAACxB,WAAW,CAACE,KAAK,EAAE,MAAM,CAAC,CAACuB,MAAM,CAAAC,QAAA,CAAAA,QAAA,KACtEwB,IAAI;QACPP,SAAS,EAAAA,SAAA;QACTM,IAAI,EAAE,GAAAhB,MAAA,CAAGgB,IAAI;MAAE,GACf;MAEF;MACAR,KAAI,CAACvC,KAAK,CAACkD,EAAE,CAAC,WAAW,EAAE,UAACC,CAAa;QACvCA,CAAC,CAACC,eAAe,EAAE;MACrB,CAAC,CAAC;MACFb,KAAI,CAACvC,KAAK,CAACkD,EAAE,CAAC,YAAY,EAAE,UAACC,CAAa;QACxCA,CAAC,CAACC,eAAe,EAAE;MACrB,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAEOjB,MAAA,CAAA3B,SAAA,CAAA6C,UAAU,GAAlB,UAAmB1C,SAAgB;IAC3B,IAAAC,EAAA,GAAwB,IAAI,CAACF,UAAU;MAArCM,WAAW,GAAAJ,EAAA,CAAAI,WAAA;MAAEsC,IAAI,GAAA1C,EAAA,CAAA0C,IAAoB;IAC7C,IAAMrC,SAAS,GAAAO,QAAA,CAAAA,QAAA;MAAKR,WAAW,EAAAA;IAAA,GAAKpB,uBAAuB,GAAKF,aAAa,CAAC,IAAI,CAACgB,UAAU,EAAE,MAAM,CAAC,CAAE;IAChG,IAAAI,EAAA,GAA2D,IAAI,CAACJ,UAAU,CAAA6C,SAApB;MAAtDA,SAAS,GAAAzC,EAAA,cAAG;QAAM,WAAIT,UAAU,CAAC;UAAEqC,KAAK,EAAEzB;QAAS,CAAE,CAAC;MAApC,CAAoC,GAAAH,EAAA;IAC9D,IAAMb,SAAS,GAAGT,MAAM,CAACmB,SAAS,CAAC,CAACW,sBAAsB,CAACxB,WAAW,CAACG,SAAS,EAAE,GAAG,CAAC;IACtFA,SAAS,CACNuD,SAAS,CAAC1D,WAAW,CAACI,IAAI,CAACuD,KAAK,CAAC,CACjCC,IAAI,CAAC,CAACH,SAAS,CAAC,CAAC,CACjBI,IAAI,CACH,UAACC,KAAK;MACJ,OAAAA,KAAK,CACFC,MAAM,CAAC,OAAON,SAAS,KAAK,QAAQ,GAAGA,SAAS,GAAG;QAAM,OAAAA,SAAS,CAACD,IAAI,CAAC;MAAf,CAAe,CAAC,CACzEQ,IAAI,CAAC,WAAW,EAAEhE,WAAW,CAACI,IAAI,CAAC6D,IAAI,CAAC;IAF3C,CAE2C,EAC7C,UAACC,MAAM;MAAK,OAAAA,MAAM,CAACA,MAAM,CAAC/C,SAAS,CAAC;IAAxB,CAAwB,EACpC,UAACgD,IAAI;MAAK,OAAAA,IAAI,CAACC,MAAM,EAAE;IAAb,CAAa,CACxB;EACL,CAAC;EAEM/B,MAAA,CAAA3B,SAAA,CAAAC,MAAM,GAAb,UAAcC,UAA4B,EAAEC,SAAgB;IAC1D,IAAI,CAAC0C,UAAU,CAAC1C,SAAS,CAAC;IAC1B,IAAI,CAAC2B,WAAW,CAAC3B,SAAS,CAAC;EAC7B,CAAC;EACH,OAAAwB,MAAC;AAAD,CAAC,CAzD2B9C,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}