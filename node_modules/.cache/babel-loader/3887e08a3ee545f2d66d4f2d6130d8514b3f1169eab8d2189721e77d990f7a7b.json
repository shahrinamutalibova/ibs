{"ast":null,"code":"import { FederatedEvent, ERROR_MSG_METHOD_NOT_IMPLEMENTED, propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { __extends, __read, __spreadArray } from 'tslib';\nimport { clamp, isNumber, isNil } from '@antv/util';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nvar AnimationEvent = /** @class */function (_super) {\n  __extends(AnimationEvent, _super);\n  function AnimationEvent(manager, target, currentTime, timelineTime) {\n    var _this = _super.call(this, manager) || this;\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    // @ts-ignore\n    _this.target = target;\n    _this.type = 'finish';\n    _this.bubbles = false;\n    // @ts-ignore\n    _this.currentTarget = target;\n    _this.defaultPrevented = false;\n    _this.eventPhase = _this.AT_TARGET;\n    _this.timeStamp = Date.now();\n    _this.currentTime = currentTime;\n    _this.timelineTime = timelineTime;\n    return _this;\n  }\n  return AnimationEvent;\n}(FederatedEvent);\nvar sequenceNumber = 0;\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nvar Animation = /** @class */function () {\n  function Animation(effect, timeline) {\n    var _a;\n    this.currentTimePending = false;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n     */\n    // playState: AnimationPlayState;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n     */\n    this._currentTime = 0;\n    this._playbackRate = 1;\n    this._inTimeline = true;\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = \"\".concat(sequenceNumber++);\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number((_a = this.effect) === null || _a === void 0 ? void 0 : _a.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n  Object.defineProperty(Animation.prototype, \"pending\", {\n    // animation: InternalAnimation | null;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n     */\n    get: function () {\n      return this._startTime === null && !this._paused && this.playbackRate !== 0 || this.currentTimePending;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"playState\", {\n    get: function () {\n      if (this._idle) return 'idle';\n      if (this._isFinished) return 'finished';\n      if (this._paused) return 'paused';\n      return 'running';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"ready\", {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n     * @example\n      animation.pause();\n      animation.ready.then(function() {\n        // Displays 'running'\n        alert(animation.playState);\n      });\n      animation.play();\n     */\n    get: function () {\n      var _this = this;\n      if (!this.readyPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.readyPromise = new Promise(function (resolve, reject) {\n          _this.resolveReadyPromise = function () {\n            resolve(_this);\n          };\n          _this.rejectReadyPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (!this.pending) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"finished\", {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n     * @example\n      Promise.all(\n        elem.getAnimations().map(\n          function(animation) {\n            return animation.finished\n          }\n        )\n      ).then(\n        function() {\n          return elem.remove();\n        }\n      );\n     */\n    get: function () {\n      var _this = this;\n      if (!this.finishedPromise) {\n        if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n          this.timeline.animationsWithPromises.push(this);\n        }\n        this.finishedPromise = new Promise(function (resolve, reject) {\n          _this.resolveFinishedPromise = function () {\n            resolve(_this);\n          };\n          _this.rejectFinishedPromise = function () {\n            reject(new Error());\n          };\n        });\n        if (this.playState === 'finished') {\n          this.resolveFinishedPromise();\n        }\n      }\n      return this.finishedPromise;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"currentTime\", {\n    get: function () {\n      this.updatePromises();\n      return this._idle || this.currentTimePending ? null : this._currentTime;\n    },\n    set: function (newTime) {\n      var _a;\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      this.timeline.restart();\n      if (!this._paused && this._startTime !== null) {\n        this._startTime = Number((_a = this.timeline) === null || _a === void 0 ? void 0 : _a.currentTime) - newTime / this.playbackRate;\n      }\n      this.currentTimePending = false;\n      if (this._currentTime === newTime) {\n        return;\n      }\n      if (this._idle) {\n        this._idle = false;\n        this._paused = true;\n      }\n      this.tickCurrentTime(newTime, true);\n      this.timeline.applyDirtiedAnimation(this);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"startTime\", {\n    get: function () {\n      return this._startTime;\n    },\n    set: function (newTime) {\n      if (newTime !== null) {\n        this.updatePromises();\n        newTime = Number(newTime);\n        if (isNaN(newTime)) return;\n        if (this._paused || this._idle) return;\n        this._startTime = newTime;\n        this.tickCurrentTime((Number(this.timeline.currentTime) - this._startTime) * this.playbackRate);\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"playbackRate\", {\n    get: function () {\n      return this._playbackRate;\n    },\n    set: function (value) {\n      if (value === this._playbackRate) {\n        return;\n      }\n      this.updatePromises();\n      var oldCurrentTime = this.currentTime;\n      this._playbackRate = value;\n      this.startTime = null;\n      if (this.playState !== 'paused' && this.playState !== 'idle') {\n        this._finishedFlag = false;\n        this._idle = false;\n        this.ensureAlive();\n        this.timeline.applyDirtiedAnimation(this);\n      }\n      if (oldCurrentTime !== null) {\n        this.currentTime = oldCurrentTime;\n      }\n      this.updatePromises();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"_isFinished\", {\n    get: function () {\n      return !this._idle && (this._playbackRate > 0 && Number(this._currentTime) >= this._totalDuration || this._playbackRate < 0 && Number(this._currentTime) <= 0);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"totalDuration\", {\n    get: function () {\n      return this._totalDuration;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Animation.prototype, \"_needsTick\", {\n    get: function () {\n      return this.pending || this.playState === 'running' || !this._finishedFlag;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  Animation.prototype.updatePromises = function () {\n    var oldPlayState = this.oldPlayState;\n    var newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  };\n  Animation.prototype.play = function () {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n    this.updatePromises();\n  };\n  Animation.prototype.pause = function () {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n    this.updatePromises();\n  };\n  Animation.prototype.finish = function () {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n    this.updatePromises();\n  };\n  Animation.prototype.cancel = function () {\n    var _this = this;\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n    this.updatePromises();\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n    if (this.oncancel) {\n      var event_1 = new AnimationEvent(null, this, this.currentTime, null);\n      setTimeout(function () {\n        _this.oncancel(event_1);\n      });\n    }\n  };\n  Animation.prototype.reverse = function () {\n    this.updatePromises();\n    var oldCurrentTime = this.currentTime;\n    this.playbackRate *= -1;\n    this.play();\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  Animation.prototype.updatePlaybackRate = function (playbackRate) {\n    this.playbackRate = playbackRate;\n  };\n  Animation.prototype.targetAnimations = function () {\n    var _a;\n    var target = (_a = this.effect) === null || _a === void 0 ? void 0 : _a.target;\n    return target.getAnimations();\n  };\n  Animation.prototype.markTarget = function () {\n    var animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  };\n  Animation.prototype.unmarkTarget = function () {\n    var animations = this.targetAnimations();\n    var index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  };\n  Animation.prototype.tick = function (timelineTime, isAnimationFrame) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime((timelineTime - this._startTime) * this.playbackRate);\n      }\n    }\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  };\n  Animation.prototype.rewind = function () {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error('Unable to rewind negative playback rate animation with infinite duration');\n    }\n  };\n  Animation.prototype.persist = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Animation.prototype.addEventListener = function (type, listener, options) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Animation.prototype.removeEventListener = function (type, listener, options) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Animation.prototype.dispatchEvent = function (event) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  // replaceState: AnimationReplaceState;\n  Animation.prototype.commitStyles = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Animation.prototype.ensureAlive = function () {\n    var _a, _b;\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!((_a = this.effect) === null || _a === void 0 ? void 0 : _a.update(-1));\n    } else {\n      this._inEffect = !!((_b = this.effect) === null || _b === void 0 ? void 0 : _b.update(this.currentTime));\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  };\n  Animation.prototype.tickCurrentTime = function (newTime, ignoreLimit) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  };\n  Animation.prototype.fireEvents = function (baseTime) {\n    var _this = this;\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          var event_2 = new AnimationEvent(null, this, this.currentTime, baseTime);\n          setTimeout(function () {\n            if (_this.onfinish) {\n              _this.onfinish(event_2);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        var event_3 = new AnimationEvent(null, this, this.currentTime, baseTime);\n        this.onframe(event_3);\n      }\n      this._finishedFlag = false;\n    }\n  };\n  return Animation;\n}();\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nvar float32ArraySupported = typeof Float32Array === 'function';\nvar A = function (aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n};\nvar B = function (aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n};\nvar C = function (aA1) {\n  return 3.0 * aA1;\n};\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nvar calcBezier = function (aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n};\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nvar getSlope = function (aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n};\nvar binarySubdivide = function (aX, aA, aB, mX1, mX2) {\n  var currentX,\n    currentT,\n    i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;else aA = currentT;\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n};\nvar newtonRaphsonIterate = function (aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n};\nvar bezier = function (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) throw new Error('bezier x values must be in [0, 1] range');\n  if (mX1 === mY1 && mX2 === mY2) return function (t) {\n    return t;\n  };\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n  var getTForX = function (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) intervalStart += kSampleStepSize;\n    --currentSample;\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) return newtonRaphsonIterate(aX, guessForT, mX1, mX2);else if (initialSlope === 0.0) return guessForT;else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  };\n  return function (t) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\nvar convertToDash = function (str) {\n  str = str.replace(/([A-Z])/g, function (letter) {\n    return \"-\".concat(letter.toLowerCase());\n  });\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nvar Quad = function (t) {\n  return Math.pow(t, 2);\n};\nvar Cubic = function (t) {\n  return Math.pow(t, 3);\n};\nvar Quart = function (t) {\n  return Math.pow(t, 4);\n};\nvar Quint = function (t) {\n  return Math.pow(t, 5);\n};\nvar Expo = function (t) {\n  return Math.pow(t, 6);\n};\nvar Sine = function (t) {\n  return 1 - Math.cos(t * Math.PI / 2);\n};\nvar Circ = function (t) {\n  return 1 - Math.sqrt(1 - t * t);\n};\nvar Back = function (t) {\n  return t * t * (3 * t - 2);\n};\nvar Bounce = function (t) {\n  var pow2,\n    b = 4;\n  while (t < ((pow2 = Math.pow(2, --b)) - 1) / 11) {}\n  return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - t, 2);\n};\nvar Elastic = function (t, params) {\n  if (params === void 0) {\n    params = [];\n  }\n  var _a = __read(params, 2),\n    _b = _a[0],\n    amplitude = _b === void 0 ? 1 : _b,\n    _c = _a[1],\n    period = _c === void 0 ? 0.5 : _c;\n  var a = clamp(Number(amplitude), 1, 10);\n  var p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return -a * Math.pow(2, 10 * (t - 1)) * Math.sin((t - 1 - p / (Math.PI * 2) * Math.asin(1 / a)) * (Math.PI * 2) / p);\n};\nvar Spring = function (t, params, duration) {\n  if (params === void 0) {\n    params = [];\n  }\n  var _a = __read(params, 4),\n    _b = _a[0],\n    mass = _b === void 0 ? 1 : _b,\n    _c = _a[1],\n    stiffness = _c === void 0 ? 100 : _c,\n    _d = _a[2],\n    damping = _d === void 0 ? 10 : _d,\n    _e = _a[3],\n    velocity = _e === void 0 ? 0 : _e;\n  mass = clamp(mass, 0.1, 1000);\n  stiffness = clamp(stiffness, 0.1, 1000);\n  damping = clamp(damping, 0.1, 1000);\n  velocity = clamp(velocity, 0.1, 1000);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n  var progress = duration ? duration * t / 1000 : t;\n  if (zeta < 1) {\n    progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nvar Steps = function (t, params) {\n  if (params === void 0) {\n    params = [];\n  }\n  var _a = __read(params, 2),\n    _b = _a[0],\n    steps = _b === void 0 ? 10 : _b,\n    type = _a[1];\n  var trunc = type == 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n// @ts-ignore\nvar Bezier = function (t, params) {\n  if (params === void 0) {\n    params = [];\n  }\n  var _a = __read(params, 4),\n    mX1 = _a[0],\n    mY1 = _a[1],\n    mX2 = _a[2],\n    mY2 = _a[3];\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n/** The default `ease-in` easing function */\nvar easein = bezier(0.42, 0.0, 1.0, 1.0);\n/** Converts easing functions to their `out`counter parts */\nvar EaseOut = function (ease) {\n  return function (t, params, duration) {\n    if (params === void 0) {\n      params = [];\n    }\n    return 1 - ease(1 - t, params, duration);\n  };\n};\n/** Converts easing functions to their `in-out` counter parts */\nvar EaseInOut = function (ease) {\n  return function (t, params, duration) {\n    if (params === void 0) {\n      params = [];\n    }\n    return t < 0.5 ? ease(t * 2, params, duration) / 2 : 1 - ease(t * -2 + 2, params, duration) / 2;\n  };\n};\n/** Converts easing functions to their `out-in` counter parts */\nvar EaseOutIn = function (ease) {\n  return function (t, params, duration) {\n    if (params === void 0) {\n      params = [];\n    }\n    return t < 0.5 ? (1 - ease(1 - t * 2, params, duration)) / 2 : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\nvar EasingFunctions = {\n  steps: Steps,\n  'step-start': function (t) {\n    return Steps(t, [1, 'start']);\n  },\n  'step-end': function (t) {\n    return Steps(t, [1, 'end']);\n  },\n  linear: function (t) {\n    return t;\n  },\n  'cubic-bezier': Bezier,\n  ease: function (t) {\n    return Bezier(t, [0.25, 0.1, 0.25, 1.0]);\n  },\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring)\n};\n/**\n * Convert string easing to their proper form\n */\nvar complexEasingSyntax = function (ease) {\n  return convertToDash(ease).replace(/^ease-/, '') // Remove the \"ease-\" keyword\n  .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n  .toLowerCase().trim();\n};\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nvar getEasingFunction = function (ease) {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n\nvar linear = function (x) {\n  return x;\n};\nvar Start = 1;\nvar Middle = 0.5;\nvar End = 0;\nfunction step(count, pos) {\n  return function (x) {\n    if (x >= 1) {\n      return 1;\n    }\n    var stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - x % stepSize;\n  };\n}\nvar numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nvar cubicBezierRe = new RegExp('cubic-bezier\\\\(' + numberString + ',' + numberString + ',' + numberString + ',' + numberString + '\\\\)');\nvar step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nvar step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\nfunction parseEasingFunction(normalizedEasing) {\n  var cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier.apply(void 0, __spreadArray([], __read(cubicData.slice(1).map(Number)), false));\n  }\n  var step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  var step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(Number(step2Data[1]), {\n      start: Start,\n      middle: Middle,\n      end: End\n    }[step2Data[2]]);\n  }\n  return getEasingFunction(normalizedEasing);\n}\nfunction calculateActiveDuration(timing) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\nfunction repeatedDuration(timing) {\n  var _a;\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n  return (timing.duration === 'auto' ? 0 : Number(timing.duration)) * ((_a = timing.iterations) !== null && _a !== void 0 ? _a : 1);\n}\nvar PhaseNone = 0;\nvar PhaseBefore = 1;\nvar PhaseAfter = 2;\nvar PhaseActive = 3;\nfunction calculatePhase(activeDuration, localTime, timing) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n  var endTime = timing.endTime;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (localTime >= Math.min(timing.delay + activeDuration + timing.endDelay, endTime)) {\n    return PhaseAfter;\n  }\n  return PhaseActive;\n}\nfunction calculateActiveTime(activeDuration, fillMode, localTime, phase, delay) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\nfunction calculateOverallProgress(iterationDuration, phase, iterations, activeTime, iterationStart) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  var overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\nfunction calculateSimpleIterationProgress(overallProgress, iterationStart, phase, iterations, activeTime, iterationDuration) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n  var simpleIterationProgress = overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (simpleIterationProgress === 0 && phase === PhaseAfter && iterations !== 0 && (activeTime !== 0 || iterationDuration === 0)) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\nfunction calculateCurrentIteration(phase, iterations, simpleIterationProgress, overallProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\nfunction calculateDirectedProgress(playbackDirection, currentIteration, simpleIterationProgress) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  var currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    var d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\nfunction calculateIterationProgress(activeDuration, localTime, timing) {\n  var phase = calculatePhase(activeDuration, localTime, timing);\n  var activeTime = calculateActiveTime(activeDuration, timing.fill, localTime, phase, timing.delay);\n  if (activeTime === null) return null;\n  var duration = timing.duration === 'auto' ? 0 : timing.duration;\n  var overallProgress = calculateOverallProgress(duration, phase, timing.iterations, activeTime, timing.iterationStart);\n  var simpleIterationProgress = calculateSimpleIterationProgress(overallProgress, timing.iterationStart, phase, timing.iterations, activeTime, duration);\n  var currentIteration = calculateCurrentIteration(phase, timing.iterations, simpleIterationProgress, overallProgress);\n  var directedProgress = calculateDirectedProgress(timing.direction, currentIteration, simpleIterationProgress);\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\nfunction convertEffectInput(keyframes, timing, target) {\n  var propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(keyframes, timing);\n  var interpolations = makeInterpolations(propertySpecificKeyframeGroups, target);\n  return function (target, fraction) {\n    if (fraction !== null) {\n      interpolations.filter(function (interpolation) {\n        return fraction >= interpolation.applyFrom && fraction < interpolation.applyTo;\n      }).forEach(function (interpolation) {\n        var offsetFraction = fraction - interpolation.startOffset;\n        var localDuration = interpolation.endOffset - interpolation.startOffset;\n        var scaledLocalTime = localDuration === 0 ? 0 : interpolation.easingFunction(offsetFraction / localDuration);\n        // apply updated attribute\n        target.setAttribute(interpolation.property, interpolation.interpolation(scaledLocalTime), false, false);\n        // if (interpolation.property === 'visibility') {\n        //   console.log(\n        //     scaledLocalTime,\n        //     interpolation.interpolation(scaledLocalTime),\n        //   );\n        // }\n      });\n    } else {\n      for (var property in propertySpecificKeyframeGroups) if (isNotReservedWord(property)) {\n        // clear attribute\n        target.setAttribute(property, null);\n      }\n    }\n  };\n}\nfunction isNotReservedWord(member) {\n  return member !== 'offset' && member !== 'easing' && member !== 'composite' && member !== 'computedOffset';\n}\nfunction makePropertySpecificKeyframeGroups(keyframes, timing) {\n  var propertySpecificKeyframeGroups = {};\n  for (var i = 0; i < keyframes.length; i++) {\n    for (var member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        var propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction: parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member]\n        };\n        propertySpecificKeyframeGroups[member] = propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\nfunction makeInterpolations(propertySpecificKeyframeGroups, target) {\n  var interpolations = [];\n  for (var groupName in propertySpecificKeyframeGroups) {\n    var keyframes = propertySpecificKeyframeGroups[groupName];\n    for (var i = 0; i < keyframes.length - 1; i++) {\n      var startIndex = i;\n      var endIndex = i + 1;\n      var startOffset = keyframes[startIndex].computedOffset;\n      var endOffset = keyframes[endIndex].computedOffset;\n      var applyFrom = startOffset;\n      var applyTo = endOffset;\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n      interpolations.push({\n        applyFrom: applyFrom,\n        applyTo: applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(groupName, keyframes[startIndex].value, keyframes[endIndex].value, target)\n      });\n    }\n  }\n  interpolations.sort(function (leftInterpolation, rightInterpolation) {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\nvar InterpolationFactory = function (from, to,\n// eslint-disable-next-line @typescript-eslint/ban-types\nconvertToString) {\n  return function (f) {\n    var interpolated = interpolate(from, to, f);\n    return !runtime.enableCSSParsing && isNumber(interpolated) ? interpolated : convertToString(interpolated);\n  };\n};\nfunction propertyInterpolation(property, left, right, target) {\n  var metadata = propertyMetadataCache[property];\n  // discrete step\n  // if (property === 'visibility') {\n  //   return function (t: number) {\n  //     if (t === 0) return left;\n  //     if (t === 1) return right;\n  //     debugger;\n  //     return t < 0.5 ? left : right;\n  //   };\n  // }\n  if (metadata && metadata.syntax && metadata.int) {\n    var propertyHandler = runtime.styleValueRegistry.getPropertySyntax(metadata.syntax);\n    if (propertyHandler) {\n      var usedLeft = void 0;\n      var usedRight = void 0;\n      if (runtime.enableCSSParsing) {\n        var computedLeft = runtime.styleValueRegistry.parseProperty(property, left, target, false);\n        var computedRight = runtime.styleValueRegistry.parseProperty(property, right, target, false);\n        usedLeft = runtime.styleValueRegistry.computeProperty(property, computedLeft, target, false);\n        usedRight = runtime.styleValueRegistry.computeProperty(property, computedRight, target, false);\n      } else {\n        var parser = propertyHandler.parserWithCSSDisabled;\n        usedLeft = parser ? parser(left, target) : left;\n        usedRight = parser ? parser(right, target) : right;\n      }\n      // merger [left, right, n2string()]\n      var interpolationArgs = propertyHandler.mixer(usedLeft, usedRight, target);\n      if (interpolationArgs) {\n        var interp_1 = InterpolationFactory.apply(void 0, __spreadArray([], __read(interpolationArgs), false));\n        return function (t) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp_1(t);\n        };\n      }\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool) {\n    return bool ? right : left;\n  });\n}\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(from, to, f) {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (typeof from === 'boolean' && typeof to === 'boolean' || typeof from === 'string' && typeof to === 'string' // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    var fromLength = from.length;\n    var toLength = to.length;\n    var length_1 = Math.max(fromLength, toLength);\n    var r = [];\n    for (var i = 0; i < length_1; i++) {\n      r.push(interpolate(from[i < fromLength ? i : fromLength - 1], to[i < toLength ? i : toLength - 1], f));\n    }\n    return r;\n  }\n  throw new Error('Mismatched interpolation arguments ' + from + ':' + to);\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nvar AnimationEffectTiming = /** @class */function () {\n  function AnimationEffectTiming() {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n     */\n    this.delay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n     */\n    this.direction = 'normal';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n     */\n    this.duration = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n     */\n    this._easing = 'linear';\n    this.easingFunction = linear;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n     */\n    this.endDelay = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n     */\n    this.fill = 'auto';\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n     */\n    this.iterationStart = 0;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n     */\n    this.iterations = 1;\n    this.currentIteration = null;\n    this.progress = null;\n  }\n  Object.defineProperty(AnimationEffectTiming.prototype, \"easing\", {\n    get: function () {\n      return this._easing;\n    },\n    set: function (value) {\n      this.easingFunction = parseEasingFunction(value);\n      this._easing = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return AnimationEffectTiming;\n}();\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput) {\n  var normalizedEffectInput = [];\n  for (var property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n    // @ts-ignore\n    var values = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n    var numKeyframes = values.length;\n    for (var i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        var keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n  normalizedEffectInput.sort(function (a, b) {\n    return (a.computedOffset || 0) - (b.computedOffset || 0);\n  });\n  return normalizedEffectInput;\n}\nfunction normalizeKeyframes(effectInput, timing) {\n  if (effectInput === null) {\n    return [];\n  }\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n  var keyframes = effectInput.map(function (originalKeyframe) {\n    var keyframe = {};\n    if (timing === null || timing === void 0 ? void 0 : timing.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n    for (var member in originalKeyframe) {\n      var memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue)) throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1) throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (['replace', 'add', 'accumulate', 'auto'].indexOf(memberValue) === -1) {\n          throw new Error(\"\".concat(memberValue, \" compositing is not supported\"));\n        }\n      } else ;\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = (timing === null || timing === void 0 ? void 0 : timing.easing) || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n  var everyFrameHasOffset = true;\n  var previousOffset = -Infinity;\n  for (var i = 0; i < keyframes.length; i++) {\n    var offset = keyframes[i].offset;\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError('Keyframes are not loosely sorted by offset. Sort or specify offsets.');\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n  keyframes = keyframes.filter(function (keyframe) {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n  function spaceKeyframes() {\n    var _a, _b;\n    var length = keyframes.length;\n    keyframes[length - 1].computedOffset = Number((_a = keyframes[length - 1].offset) !== null && _a !== void 0 ? _a : 1);\n    if (length > 1) {\n      keyframes[0].computedOffset = Number((_b = keyframes[0].offset) !== null && _b !== void 0 ? _b : 0);\n    }\n    var previousIndex = 0;\n    var previousOffset = Number(keyframes[0].computedOffset);\n    for (var i = 1; i < length; i++) {\n      var offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (var j = 1; j < i - previousIndex; j++) keyframes[previousIndex + j].computedOffset = previousOffset + (Number(offset) - previousOffset) * j / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n  return keyframes;\n}\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nfunction makeTiming(timingInput, forGroup) {\n  var timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    Object.keys(timingInput).forEach(function (property) {\n      if (timingInput[property] !== undefined && timingInput[property] !== null && timingInput[property] !== 'auto') {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (typeof timingInput[property] !== 'number' || isNaN(timingInput[property])) {\n            return;\n          }\n        }\n        if (property === 'fill' && fills.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        if (property === 'direction' && directions.indexOf(timingInput[property]) === -1) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\nfunction normalizeTimingInput(timingInput, forGroup) {\n  timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : {\n    duration: 'auto'\n  });\n  return makeTiming(timingInput, forGroup);\n}\nfunction numericTimingToObject(timingInput) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = {\n        duration: 'auto'\n      };\n    } else {\n      timingInput = {\n        duration: timingInput\n      };\n    }\n  }\n  return timingInput;\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nvar KeyframeEffect = /** @class */function () {\n  function KeyframeEffect(target, effectInput, timingInput) {\n    var _this = this;\n    this.composite = 'replace';\n    this.iterationComposite = 'replace';\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n    // 不支持 proxy 时降级成 this.timing\n    var Proxy = runtime.globalThis.Proxy;\n    this.computedTiming = Proxy ? new Proxy(this.timing, {\n      get: function (target, prop) {\n        if (prop === 'duration') {\n          return target.duration === 'auto' ? 0 : target.duration;\n        } else if (prop === 'fill') {\n          return target.fill === 'auto' ? 'none' : target.fill;\n        } else if (prop === 'localTime') {\n          return _this.animation && _this.animation.currentTime || null;\n        } else if (prop === 'currentIteration') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.currentIteration || 0;\n        } else if (prop === 'progress') {\n          if (!_this.animation || _this.animation.playState !== 'running') {\n            return null;\n          }\n          return target.progress || 0;\n        }\n        return target[prop];\n      },\n      set: function () {\n        return true;\n      }\n    }) : this.timing;\n  }\n  KeyframeEffect.prototype.applyInterpolations = function () {\n    this.interpolations(this.target, Number(this.timeFraction));\n  };\n  KeyframeEffect.prototype.update = function (localTime) {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n    return this.timeFraction !== null;\n  };\n  KeyframeEffect.prototype.getKeyframes = function () {\n    return this.normalizedKeyframes;\n  };\n  KeyframeEffect.prototype.setKeyframes = function (keyframes) {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  KeyframeEffect.prototype.getComputedTiming = function () {\n    return this.computedTiming;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  KeyframeEffect.prototype.getTiming = function () {\n    return this.timing;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  KeyframeEffect.prototype.updateTiming = function (timing) {\n    var _this = this;\n    Object.keys(timing || {}).forEach(function (name) {\n      _this.timing[name] = timing[name];\n    });\n  };\n  return KeyframeEffect;\n}();\nfunction compareAnimations(leftAnimation, rightAnimation) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nvar AnimationTimeline = /** @class */function () {\n  function AnimationTimeline(document) {\n    var _this = this;\n    this.document = document;\n    /**\n     * all active animations\n     */\n    this.animations = [];\n    this.ticking = false;\n    this.timelineTicking = false;\n    this.hasRestartedThisFrame = false;\n    this.animationsWithPromises = [];\n    this.inTick = false;\n    this.pendingEffects = [];\n    this.currentTime = null;\n    this.rafId = 0;\n    this.rafCallbacks = [];\n    this.webAnimationsNextTick = function (t) {\n      _this.currentTime = t;\n      _this.discardAnimations();\n      if (_this.animations.length === 0) {\n        _this.timelineTicking = false;\n      } else {\n        _this.requestAnimationFrame(_this.webAnimationsNextTick);\n      }\n    };\n    this.processRafCallbacks = function (t) {\n      var processing = _this.rafCallbacks;\n      _this.rafCallbacks = [];\n      if (t < Number(_this.currentTime)) t = Number(_this.currentTime);\n      _this.animations.sort(compareAnimations);\n      _this.animations = _this.tick(t, true, _this.animations)[0];\n      processing.forEach(function (entry) {\n        entry[1](t);\n      });\n      _this.applyPendingEffects();\n    };\n  }\n  AnimationTimeline.prototype.getAnimations = function () {\n    this.discardAnimations();\n    return this.animations.slice();\n  };\n  AnimationTimeline.prototype.isTicking = function () {\n    return this.inTick;\n  };\n  AnimationTimeline.prototype.play = function (target, keyframes, options) {\n    var effect = new KeyframeEffect(target, keyframes, options);\n    var animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  };\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  AnimationTimeline.prototype.applyDirtiedAnimation = function (animation) {\n    var _this = this;\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    var animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n    // clear inactive animations\n    var inactiveAnimations = this.tick(Number(this.currentTime), false, animations.slice())[1];\n    inactiveAnimations.forEach(function (animation) {\n      var index = _this.animations.indexOf(animation);\n      if (index !== -1) {\n        _this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  };\n  AnimationTimeline.prototype.restart = function () {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(function () {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  };\n  AnimationTimeline.prototype.destroy = function () {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  };\n  AnimationTimeline.prototype.applyPendingEffects = function () {\n    this.pendingEffects.forEach(function (effect) {\n      effect === null || effect === void 0 ? void 0 : effect.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  };\n  AnimationTimeline.prototype.updateAnimationsPromises = function () {\n    this.animationsWithPromises = this.animationsWithPromises.filter(function (animation) {\n      return animation.updatePromises();\n    });\n  };\n  AnimationTimeline.prototype.discardAnimations = function () {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter(function (animation) {\n      return animation.playState !== 'finished' && animation.playState !== 'idle';\n    });\n  };\n  AnimationTimeline.prototype.restartWebAnimationsNextTick = function () {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n  AnimationTimeline.prototype.rAF = function (f) {\n    var id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(this.processRafCallbacks);\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  };\n  AnimationTimeline.prototype.requestAnimationFrame = function (f) {\n    var _this = this;\n    return this.rAF(function (x) {\n      _this.updateAnimationsPromises();\n      f(x);\n      _this.updateAnimationsPromises();\n    });\n  };\n  AnimationTimeline.prototype.tick = function (t, isAnimationFrame, updatingAnimations) {\n    var _a, _b;\n    var _this = this;\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n    this.currentTime = t;\n    this.ticking = false;\n    var newPendingClears = [];\n    var newPendingEffects = [];\n    var activeAnimations = [];\n    var inactiveAnimations = [];\n    updatingAnimations.forEach(function (animation) {\n      animation.tick(t, isAnimationFrame);\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n      if (animation._needsTick) _this.ticking = true;\n      var alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n    (_a = this.pendingEffects).push.apply(_a, __spreadArray([], __read(newPendingClears), false));\n    (_b = this.pendingEffects).push.apply(_b, __spreadArray([], __read(newPendingEffects), false));\n    if (this.ticking) this.requestAnimationFrame(function () {});\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  };\n  return AnimationTimeline;\n}();\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\nexport { Animation, AnimationEvent, AnimationTimeline, EasingFunctions, KeyframeEffect, compareAnimations, makeTiming, normalizeKeyframes, normalizeTimingInput, numericTimingToObject };","map":{"version":3,"names":["AnimationEvent","_super","__extends","manager","target","currentTime","timelineTime","_this","call","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","FederatedEvent","sequenceNumber","Animation","effect","timeline","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","Number","_a","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","Object","defineProperty","prototype","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","restart","tickCurrentTime","applyDirtiedAnimation","value","oldCurrentTime","startTime","ensureAlive","newPlayState","undefined","play","rewind","animations","pause","finish","cancel","oncancel","event_1","setTimeout","reverse","updatePlaybackRate","targetAnimations","getAnimations","markTarget","unmarkTarget","index","splice","tick","isAnimationFrame","fireEvents","Infinity","persist","ERROR_MSG_METHOD_NOT_IMPLEMENTED","addEventListener","listener","options","removeEventListener","dispatchEvent","event","commitStyles","_b","ignoreLimit","baseTime","onfinish","event_2","onframe","event_3","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","bezier","mY1","mY2","t","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","convertToDash","str","replace","letter","toLowerCase","charAt","substring","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","params","__read","amplitude","_c","period","a","clamp","p","sin","asin","Spring","duration","mass","stiffness","_d","damping","_e","velocity","w0","zeta","wd","progress","exp","Steps","steps","trunc","ceil","floor","Bezier","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","step-start","step-end","linear","in","out","spring","complexEasingSyntax","trim","getEasingFunction","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","apply","__spreadArray","slice","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","repeatedDuration","iterations","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculatePhase","activeDuration","localTime","min","delay","endDelay","calculateActiveTime","fillMode","phase","calculateOverallProgress","iterationDuration","activeTime","iterationStart","overallProgress","calculateSimpleIterationProgress","simpleIterationProgress","calculateCurrentIteration","calculateDirectedProgress","playbackDirection","currentIteration","currentDirection","d","calculateIterationProgress","fill","directedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","makePropertySpecificKeyframeGroups","interpolations","makeInterpolations","fraction","filter","interpolation","applyFrom","applyTo","forEach","offsetFraction","startOffset","localDuration","endOffset","scaledLocalTime","setAttribute","property","isNotReservedWord","member","length","propertySpecificKeyframe","offset","computedOffset","easing","groupName","startIndex","endIndex","propertyInterpolation","sort","leftInterpolation","rightInterpolation","InterpolationFactory","from","to","convertToString","f","interpolated","interpolate","runtime","enableCSSParsing","isNumber","left","right","metadata","propertyMetadataCache","syntax","int","propertyHandler","styleValueRegistry","getPropertySyntax","usedLeft","usedRight","computedLeft","parseProperty","computedRight","computeProperty","parser","parserWithCSSDisabled","interpolationArgs","mixer","interp_1","bool","isArray","fromLength","toLength","length_1","max","r","AnimationEffectTiming","_easing","convertToArrayForm","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","normalizeKeyframes","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","TypeError","spaceKeyframes","previousIndex","j","fills","split","directions","makeTiming","timingInput","forGroup","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","applyInterpolations","timeFraction","getKeyframes","setKeyframes","getTiming","updateTiming","name","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","entry","applyPendingEffects","isTicking","restartWebAnimationsNextTick","inactiveAnimations","destroy","defaultView","cancelAnimationFrame","frameId","updateAnimationsPromises","rAF","updatingAnimations","newPendingClears","newPendingEffects","activeAnimations","_needsTick","alive","EasingFunction"],"sources":["../src/packages/g-web-animations-api/src/dom/AnimationEvent.ts","../src/packages/g-web-animations-api/src/dom/Animation.ts","../src/packages/g-web-animations-api/src/utils/bezier-easing.ts","../src/packages/g-web-animations-api/src/utils/custom-easing.ts","../src/packages/g-web-animations-api/src/utils/animation.ts","../src/packages/g-web-animations-api/src/utils/interpolation.ts","../src/packages/g-web-animations-api/src/dom/AnimationEffectTiming.ts","../src/packages/g-web-animations-api/src/dom/KeyframeList.ts","../src/packages/g-web-animations-api/src/dom/KeyframeEffect.ts","../src/packages/g-web-animations-api/src/dom/AnimationTimeline.ts","../src/packages/g-web-animations-api/src/index.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}