{"ast":null,"code":"import { getAngle, CameraType, deg2rad, createVec3, runtime, Camera } from '@antv/g-lite';\nimport { __extends, __spreadArray, __read } from 'tslib';\nimport { isString, isNumber } from '@antv/util';\nimport { quat, mat4, vec3 } from 'gl-matrix';\n\n/**\n * Provides camera action & animation.\n */\nvar AdvancedCamera = /** @class */function (_super) {\n  __extends(AdvancedCamera, _super);\n  function AdvancedCamera() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    /**\n     * switch between multiple landmarks\n     */\n    _this.landmarks = [];\n    return _this;\n    /**\n     * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n     */\n    // shot(displayObject: DisplayObject) {\n    //   const aabb = displayObject.getBounds();\n    //   if (!AABB.isEmpty(aabb)) {\n    //     this.setElevation(0);\n    //     this.setAzimuth(0);\n    //     this.setRoll(0);\n    //     const { halfExtents, center } = aabb;\n    //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n    //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n    //     if (maxDim !== 0) {\n    //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n    //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n    //     }\n    //     this.setFocalPoint(cc);\n    //   }\n    // }\n  }\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  AdvancedCamera.prototype.rotate = function (azimuth, elevation, roll) {\n    this.relElevation = getAngle(elevation);\n    this.relAzimuth = getAngle(azimuth);\n    this.relRoll = getAngle(roll);\n    this.elevation += this.relElevation;\n    this.azimuth += this.relAzimuth;\n    this.roll += this.relRoll;\n    if (this.type === CameraType.EXPLORING) {\n      var rotX = quat.setAxisAngle(quat.create(), [1, 0, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation));\n      var rotY = quat.setAxisAngle(quat.create(), [0, 1, 0], deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth));\n      var rotZ = quat.setAxisAngle(quat.create(), [0, 0, 1], deg2rad(this.relRoll));\n      var rotQ = quat.multiply(quat.create(), rotY, rotX);\n      rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n      var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else {\n      if (Math.abs(this.elevation) > 90) {\n        return this;\n      }\n      this.computeMatrix();\n    }\n    this._getAxes();\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n    this._update();\n    return this;\n  };\n  /**\n   * 沿水平(right) & 垂直(up)平移相机\n   */\n  AdvancedCamera.prototype.pan = function (tx, ty) {\n    var coords = createVec3(tx, ty, 0);\n    var pos = vec3.clone(this.position);\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n    this._setPosition(pos);\n    this.triggerUpdate();\n    return this;\n  };\n  /**\n   * 沿 n 轴移动，当距离视点远时移动速度较快，离视点越近速度越慢\n   */\n  AdvancedCamera.prototype.dolly = function (value) {\n    var n = this.forward;\n    var pos = vec3.clone(this.position);\n    var step = value * this.dollyingStep;\n    var updatedDistance = this.distance + value * this.dollyingStep;\n    // 限制视点距离范围\n    step = Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) - this.distance;\n    pos[0] += step * n[0];\n    pos[1] += step * n[1];\n    pos[2] += step * n[2];\n    this._setPosition(pos);\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      // 重新计算视点距离\n      this._getDistance();\n    } else if (this.type === CameraType.TRACKING) {\n      // 保持视距，移动视点位置\n      vec3.add(this.focalPoint, pos, this.distanceVector);\n    }\n    this.triggerUpdate();\n    return this;\n  };\n  AdvancedCamera.prototype.cancelLandmarkAnimation = function () {\n    if (this.landmarkAnimationID !== undefined) {\n      this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n    }\n  };\n  AdvancedCamera.prototype.createLandmark = function (name, params) {\n    var _a, _b, _c, _d;\n    if (params === void 0) {\n      params = {};\n    }\n    var _e = params.position,\n      position = _e === void 0 ? this.position : _e,\n      _f = params.focalPoint,\n      focalPoint = _f === void 0 ? this.focalPoint : _f,\n      roll = params.roll,\n      zoom = params.zoom;\n    var camera = new runtime.CameraContribution();\n    camera.setType(this.type, undefined);\n    camera.setPosition(position[0], (_a = position[1]) !== null && _a !== void 0 ? _a : this.position[1], (_b = position[2]) !== null && _b !== void 0 ? _b : this.position[2]);\n    camera.setFocalPoint(focalPoint[0], (_c = focalPoint[1]) !== null && _c !== void 0 ? _c : this.focalPoint[1], (_d = focalPoint[2]) !== null && _d !== void 0 ? _d : this.focalPoint[2]);\n    camera.setRoll(roll !== null && roll !== void 0 ? roll : this.roll);\n    camera.setZoom(zoom !== null && zoom !== void 0 ? zoom : this.zoom);\n    var landmark = {\n      name: name,\n      matrix: mat4.clone(camera.getWorldTransform()),\n      right: vec3.clone(camera.right),\n      up: vec3.clone(camera.up),\n      forward: vec3.clone(camera.forward),\n      position: vec3.clone(camera.getPosition()),\n      focalPoint: vec3.clone(camera.getFocalPoint()),\n      distanceVector: vec3.clone(camera.getDistanceVector()),\n      distance: camera.getDistance(),\n      dollyingStep: camera.getDollyingStep(),\n      azimuth: camera.getAzimuth(),\n      elevation: camera.getElevation(),\n      roll: camera.getRoll(),\n      relAzimuth: camera.relAzimuth,\n      relElevation: camera.relElevation,\n      relRoll: camera.relRoll,\n      zoom: camera.getZoom()\n    };\n    this.landmarks.push(landmark);\n    return landmark;\n  };\n  AdvancedCamera.prototype.gotoLandmark = function (name, options) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    var landmark = isString(name) ? this.landmarks.find(function (l) {\n      return l.name === name;\n    }) : name;\n    if (landmark) {\n      var _a = isNumber(options) ? {\n          duration: options\n        } : options,\n        _b = _a.easing,\n        easing = _b === void 0 ? 'linear' : _b,\n        _c = _a.duration,\n        duration_1 = _c === void 0 ? 100 : _c,\n        _d = _a.easingFunction,\n        easingFunction = _d === void 0 ? undefined : _d,\n        _e = _a.onfinish,\n        onfinish_1 = _e === void 0 ? undefined : _e,\n        _f = _a.onframe,\n        onframe_1 = _f === void 0 ? undefined : _f;\n      var epsilon_1 = 0.01;\n      if (duration_1 === 0) {\n        this.syncFromLandmark(landmark);\n        if (onfinish_1) {\n          onfinish_1();\n        }\n        return;\n      }\n      // cancel ongoing animation\n      this.cancelLandmarkAnimation();\n      var destPosition_1 = landmark.position;\n      var destFocalPoint_1 = landmark.focalPoint;\n      var destZoom_1 = landmark.zoom;\n      var destRoll_1 = landmark.roll;\n      var easingFunc_1 = easingFunction || runtime.EasingFunction(easing);\n      var timeStart_1;\n      var endAnimation_1 = function () {\n        _this.setFocalPoint(destFocalPoint_1);\n        _this.setPosition(destPosition_1);\n        _this.setRoll(destRoll_1);\n        _this.setZoom(destZoom_1);\n        _this.computeMatrix();\n        _this.triggerUpdate();\n        if (onfinish_1) {\n          onfinish_1();\n        }\n      };\n      var animate_1 = function (timestamp) {\n        if (timeStart_1 === undefined) {\n          timeStart_1 = timestamp;\n        }\n        var elapsed = timestamp - timeStart_1;\n        if (elapsed > duration_1) {\n          endAnimation_1();\n          return;\n        }\n        // use the same ease function in animation system\n        var t = easingFunc_1(elapsed / duration_1);\n        var interFocalPoint = vec3.create();\n        var interPosition = vec3.create();\n        var interZoom = 1;\n        var interRoll = 0;\n        vec3.lerp(interFocalPoint, _this.focalPoint, destFocalPoint_1, t);\n        vec3.lerp(interPosition, _this.position, destPosition_1, t);\n        interRoll = _this.roll * (1 - t) + destRoll_1 * t;\n        interZoom = _this.zoom * (1 - t) + destZoom_1 * t;\n        _this.setFocalPoint(interFocalPoint);\n        _this.setPosition(interPosition);\n        _this.setRoll(interRoll);\n        _this.setZoom(interZoom);\n        var dist = vec3.dist(interFocalPoint, destFocalPoint_1) + vec3.dist(interPosition, destPosition_1);\n        if (dist <= epsilon_1 && destZoom_1 == undefined && destRoll_1 == undefined) {\n          endAnimation_1();\n          return;\n        }\n        _this.computeMatrix();\n        _this.triggerUpdate();\n        if (elapsed < duration_1) {\n          if (onframe_1) {\n            onframe_1(t);\n          }\n          _this.landmarkAnimationID = _this.canvas.requestAnimationFrame(animate_1);\n        }\n      };\n      this.canvas.requestAnimationFrame(animate_1);\n    }\n  };\n  AdvancedCamera.prototype.syncFromLandmark = function (landmark) {\n    this.matrix = mat4.copy(this.matrix, landmark.matrix);\n    this.right = vec3.copy(this.right, landmark.right);\n    this.up = vec3.copy(this.up, landmark.up);\n    this.forward = vec3.copy(this.forward, landmark.forward);\n    this.position = vec3.copy(this.position, landmark.position);\n    this.focalPoint = vec3.copy(this.focalPoint, landmark.focalPoint);\n    this.distanceVector = vec3.copy(this.distanceVector, landmark.distanceVector);\n    this.azimuth = landmark.azimuth;\n    this.elevation = landmark.elevation;\n    this.roll = landmark.roll;\n    this.relAzimuth = landmark.relAzimuth;\n    this.relElevation = landmark.relElevation;\n    this.relRoll = landmark.relRoll;\n    this.dollyingStep = landmark.dollyingStep;\n    this.distance = landmark.distance;\n    this.zoom = landmark.zoom;\n  };\n  return AdvancedCamera;\n}(Camera);\nruntime.CameraContribution = AdvancedCamera;\nexport { AdvancedCamera };","map":{"version":3,"names":["AdvancedCamera","_super","__extends","_this","landmarks","prototype","rotate","azimuth","elevation","roll","relElevation","getAngle","relAzimuth","relRoll","type","CameraType","EXPLORING","rotX","quat","setAxisAngle","create","deg2rad","rotateWorld","rotY","rotZ","rotQ","multiply","rotMatrix","mat4","fromQuat","translate","matrix","distance","Math","abs","computeMatrix","_getAxes","ORBITING","_getPosition","TRACKING","_getFocalPoint","_update","pan","tx","ty","coords","createVec3","pos","vec3","clone","position","add","scale","right","up","_setPosition","triggerUpdate","dolly","value","n","forward","step","dollyingStep","updatedDistance","max","min","maxDistance","minDistance","_getDistance","focalPoint","distanceVector","cancelLandmarkAnimation","landmarkAnimationID","undefined","canvas","cancelAnimationFrame","createLandmark","name","params","_e","_f","zoom","camera","runtime","CameraContribution","setType","setPosition","_a","_b","setFocalPoint","_c","_d","setRoll","setZoom","landmark","getWorldTransform","getPosition","getFocalPoint","getDistanceVector","getDistance","getDollyingStep","getAzimuth","getElevation","getRoll","getZoom","push","gotoLandmark","options","isString","find","l","isNumber","duration","easing","duration_1","easingFunction","onfinish","onfinish_1","onframe","onframe_1","epsilon_1","syncFromLandmark","destPosition_1","destFocalPoint_1","destZoom_1","destRoll_1","easingFunc_1","EasingFunction","timeStart_1","endAnimation_1","animate_1","timestamp","elapsed","t","interFocalPoint","interPosition","interZoom","interRoll","lerp","dist","requestAnimationFrame","copy","Camera"],"sources":["../src/packages/g-camera-api/src/AdvancedCamera.ts","../src/packages/g-camera-api/src/index.ts"],"sourcesContent":[null,null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}