{"ast":null,"code":"import { __extends, __read, __spreadArray } from \"tslib\";\nimport { parseAnimationOption } from '../../animation';\nimport { Component } from '../../core';\nimport { ifShow, sampling, select } from '../../util';\nimport { AXIS_BASE_DEFAULT_ATTR, CLASS_NAMES } from './constant';\nimport { renderGrid } from './guides/grid';\nimport { renderLabels } from './guides/labels';\nimport { renderAxisLine } from './guides/line';\nimport { renderTicks } from './guides/ticks';\nimport { renderTitle } from './guides/title';\nfunction renderAxisMain(attributes, container, data, animation) {\n  var showLine = attributes.showLine,\n    showTick = attributes.showTick,\n    showLabel = attributes.showLabel;\n  /** line */\n  var lineGroup = container.maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n  var lineTransitions = ifShow(showLine, lineGroup, function (group) {\n    return renderAxisLine(group, attributes, animation);\n  }) || [];\n  /** tick */\n  var tickGroup = container.maybeAppendByClassName(CLASS_NAMES.tickGroup, 'g');\n  var tickTransitions = ifShow(showTick, tickGroup, function (group) {\n    return renderTicks(group, data, attributes, animation);\n  }) || [];\n  /** label */\n  var labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n  var labelTransitions = ifShow(showLabel, labelGroup, function (group) {\n    return renderLabels(group, data, attributes, animation);\n  }) || [];\n  return __spreadArray(__spreadArray(__spreadArray([], __read(lineTransitions), false), __read(tickTransitions), false), __read(labelTransitions), false).filter(function (t) {\n    return !!t;\n  });\n}\nvar Axis = /** @class */function (_super) {\n  __extends(Axis, _super);\n  function Axis(options) {\n    return _super.call(this, options, AXIS_BASE_DEFAULT_ATTR) || this;\n  }\n  Axis.prototype.render = function (attributes, container, specificAnimation) {\n    var _this = this;\n    var titleText = attributes.titleText,\n      data = attributes.data,\n      animate = attributes.animate,\n      showTitle = attributes.showTitle,\n      showGrid = attributes.showGrid,\n      dataThreshold = attributes.dataThreshold,\n      truncRange = attributes.truncRange;\n    var sampledData = sampling(data, dataThreshold).filter(function (_a) {\n      var value = _a.value;\n      if (truncRange && value > truncRange[0] && value < truncRange[1]) return false;\n      return true;\n    });\n    var finalAnimation = parseAnimationOption(specificAnimation === undefined ? animate : specificAnimation);\n    /** grid */\n    var gridGroup = select(container).maybeAppendByClassName(CLASS_NAMES.gridGroup, 'g');\n    var gridTransitions = ifShow(showGrid, gridGroup, function (group) {\n      return renderGrid(group, sampledData, attributes, finalAnimation);\n    }) || [];\n    /** main group */\n    var mainGroup = select(container).maybeAppendByClassName(CLASS_NAMES.mainGroup, 'g');\n    if (titleText && (!this.initialized && finalAnimation.enter || this.initialized && finalAnimation.update)) {\n      renderAxisMain(attributes, select(this.offscreenGroup), sampledData, parseAnimationOption(false));\n    }\n    // render\n    var mainTransitions = renderAxisMain(attributes, select(mainGroup.node()), sampledData, finalAnimation);\n    /** title */\n    var titleGroup = select(container).maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g');\n    var titleTransitions = ifShow(showTitle, titleGroup, function (group) {\n      return renderTitle(group, _this, attributes, finalAnimation);\n    }) || [];\n    return __spreadArray(__spreadArray(__spreadArray([], __read(gridTransitions), false), __read(mainTransitions), false), __read(titleTransitions), false).flat().filter(function (t) {\n      return !!t;\n    });\n  };\n  return Axis;\n}(Component);\nexport { Axis };","map":{"version":3,"names":["parseAnimationOption","Component","ifShow","sampling","select","AXIS_BASE_DEFAULT_ATTR","CLASS_NAMES","renderGrid","renderLabels","renderAxisLine","renderTicks","renderTitle","renderAxisMain","attributes","container","data","animation","showLine","showTick","showLabel","lineGroup","maybeAppendByClassName","lineTransitions","group","tickGroup","tickTransitions","labelGroup","labelTransitions","__spreadArray","__read","filter","t","Axis","_super","__extends","options","call","prototype","render","specificAnimation","_this","titleText","animate","showTitle","showGrid","dataThreshold","truncRange","sampledData","_a","value","finalAnimation","undefined","gridGroup","gridTransitions","mainGroup","initialized","enter","update","offscreenGroup","mainTransitions","node","titleGroup","titleTransitions","flat"],"sources":["ui/axis/axis.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}