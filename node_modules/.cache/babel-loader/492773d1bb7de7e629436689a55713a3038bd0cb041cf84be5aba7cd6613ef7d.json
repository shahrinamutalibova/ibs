{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { CustomElement } from '@antv/g';\nimport { Layout } from '@antv/component';\nimport { deepMix, upperFirst } from '@antv/util';\nimport { select } from '../utils/selection';\nexport function createComponent(descriptor) {\n  return class extends CustomElement {\n    constructor(config) {\n      super(config);\n      this.descriptor = descriptor;\n    }\n    connectedCallback() {\n      var _a, _b;\n      (_b = (_a = this.descriptor).render) === null || _b === void 0 ? void 0 : _b.call(_a, this.attributes, this);\n    }\n    update(cfg = {}) {\n      var _a, _b;\n      this.attr(deepMix({}, this.attributes, cfg));\n      (_b = (_a = this.descriptor).render) === null || _b === void 0 ? void 0 : _b.call(_a, this.attributes, this);\n    }\n  };\n}\nexport function maybeAppend(parent, selector, node) {\n  if (!parent.querySelector(selector)) {\n    return select(parent).append(node);\n  }\n  return select(parent).select(selector);\n}\nexport function titleContent(field) {\n  return Array.isArray(field) ? field.join(', ') : `${field || ''}`;\n}\nexport function inferComponentLayout(position, userDefinitions) {\n  const preset = {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    alignItems: 'center'\n  };\n  let {\n    flexDirection,\n    justifyContent,\n    alignItems\n  } = preset;\n  const layout = {\n    top: ['row', 'flex-start', 'center'],\n    bottom: ['row', 'flex-start', 'center'],\n    left: ['column', 'flex-start', 'center'],\n    right: ['column', 'flex-start', 'center'],\n    center: ['column', 'center', 'center']\n  };\n  if (position in layout) {\n    [flexDirection, justifyContent, alignItems] = layout[position];\n  }\n  return Object.assign({\n    display: 'flex',\n    flexDirection,\n    justifyContent,\n    alignItems\n  }, userDefinitions);\n}\nexport class G2Layout extends Layout {\n  get child() {\n    var _a;\n    return (_a = this.children) === null || _a === void 0 ? void 0 : _a[0];\n  }\n  update(options) {\n    var _a;\n    this.attr(options);\n    const {\n      subOptions\n    } = options;\n    (_a = this.child) === null || _a === void 0 ? void 0 : _a.update(subOptions);\n  }\n}\nexport class LegendCategoryLayout extends G2Layout {\n  update(options) {\n    var _a;\n    const {\n      subOptions\n    } = options;\n    this.attr(options);\n    (_a = this.child) === null || _a === void 0 ? void 0 : _a.update(subOptions);\n  }\n}\nexport function scaleOf(scales, type) {\n  var _a;\n  return (_a = scales.filter(s => s.getOptions().name === type)) === null || _a === void 0 ? void 0 : _a[0];\n}\nexport function isHorizontal(orientation) {\n  return orientation === 'horizontal' || orientation === 0;\n}\nexport function isVertical(orientation) {\n  return orientation === 'vertical' || orientation === -Math.PI / 2;\n}\nexport function inferComponentShape(value, options, component) {\n  const {\n    bbox\n  } = value;\n  const {\n    position = 'top',\n    size: userDefinedSize,\n    length: userDefinedLength\n  } = options;\n  const isHorizontal = ['top', 'bottom', 'center'].includes(position);\n  const [bboxSize, bboxLength] = isHorizontal ? [bbox.height, bbox.width] : [bbox.width, bbox.height];\n  const {\n    defaultSize,\n    defaultLength\n  } = component.props;\n  const size = userDefinedSize || defaultSize || bboxSize;\n  const length = userDefinedLength || defaultLength || bboxLength;\n  const orientation = isHorizontal ? 'horizontal' : 'vertical';\n  const [width, height] = isHorizontal ? [length, size] : [size, length];\n  return {\n    orientation,\n    width,\n    height,\n    size,\n    length\n  };\n}\nexport function domainOf(scales) {\n  // to get a available scale's domain\n  return scales.find(scale => scale.getOptions().domain.length > 0).getOptions().domain;\n}\nexport function adaptor(style) {\n  const reservedKeys = ['arrow', 'crosshairs', 'grid', 'handle', 'handleLabel', 'indicator', 'label', 'line', 'tick', 'tip', 'title', 'trunc'];\n  // @ts-ignore\n  const {\n      style: styles\n    } = style,\n    rest = __rest(style, [\"style\"]);\n  const finalStyle = {};\n  Object.entries(rest).forEach(([key, value]) => {\n    if (reservedKeys.includes(key)) {\n      finalStyle[`show${upperFirst(key)}`] = value;\n    } else finalStyle[key] = value;\n  });\n  return Object.assign(Object.assign({}, finalStyle), styles);\n}","map":{"version":3,"names":["CustomElement","Layout","deepMix","upperFirst","select","createComponent","descriptor","constructor","config","connectedCallback","_b","_a","render","call","attributes","update","cfg","attr","maybeAppend","parent","selector","node","querySelector","append","titleContent","field","Array","isArray","join","inferComponentLayout","position","userDefinitions","preset","display","flexDirection","justifyContent","alignItems","layout","top","bottom","left","right","center","Object","assign","G2Layout","child","children","options","subOptions","LegendCategoryLayout","scaleOf","scales","type","filter","s","getOptions","name","isHorizontal","orientation","isVertical","Math","PI","inferComponentShape","value","component","bbox","size","userDefinedSize","length","userDefinedLength","includes","bboxSize","bboxLength","height","width","defaultSize","defaultLength","props","domainOf","find","scale","domain","adaptor","style","reservedKeys","styles","rest","__rest","finalStyle","entries","forEach","key"],"sources":["component/utils.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}