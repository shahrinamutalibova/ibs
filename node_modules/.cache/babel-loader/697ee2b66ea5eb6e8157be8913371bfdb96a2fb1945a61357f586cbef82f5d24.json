{"ast":null,"code":"import { __extends, __spreadArray, __read } from 'tslib';\nimport { CanvasEvent, ElementEvent, RenderReason, isCSSRGB, isPattern, Shape, AbstractRendererPlugin } from '@antv/g-lite';\nimport { isNil, isNumber, isString } from '@antv/util';\nvar CANVAS_CAMERA_ID = 'g-canvas-camera';\nvar HTMLRenderingPlugin = /** @class */function () {\n  function HTMLRenderingPlugin() {\n    this.displayObjectHTMLElementMap = new WeakMap();\n  }\n  HTMLRenderingPlugin.prototype.joinTransformMatrix = function (matrix) {\n    return \"matrix(\".concat([matrix[0], matrix[1], matrix[4], matrix[5], matrix[12], matrix[13]].join(','), \")\");\n  };\n  HTMLRenderingPlugin.prototype.apply = function (context, runtime) {\n    var _this = this;\n    var camera = context.camera,\n      renderingContext = context.renderingContext,\n      renderingService = context.renderingService;\n    this.context = context;\n    var canvas = renderingContext.root.ownerDocument.defaultView;\n    var nativeHTMLMap = canvas.context.eventService.nativeHTMLMap;\n    var setTransform = function (object, $el) {\n      $el.style.transform = _this.joinTransformMatrix(object.getWorldTransform());\n    };\n    var handleMounted = function (e) {\n      var object = e.target;\n      if (object.nodeName === Shape.HTML) {\n        if (!_this.$camera) {\n          _this.$camera = _this.createCamera(camera);\n        }\n        // create DOM element\n        var $el_1 = _this.getOrCreateEl(object);\n        _this.$camera.appendChild($el_1);\n        // apply documentElement's style\n        if (runtime.enableCSSParsing) {\n          var attributes_1 = object.ownerDocument.documentElement.attributes;\n          Object.keys(attributes_1).forEach(function (name) {\n            $el_1.style[name] = attributes_1[name];\n          });\n        }\n        Object.keys(object.attributes).forEach(function (name) {\n          _this.updateAttribute(name, object);\n        });\n        setTransform(object, $el_1);\n        nativeHTMLMap.set($el_1, object);\n      }\n    };\n    var handleUnmounted = function (e) {\n      var object = e.target;\n      if (object.nodeName === Shape.HTML && _this.$camera) {\n        var $el = _this.getOrCreateEl(object);\n        if ($el) {\n          $el.remove();\n          nativeHTMLMap.delete($el);\n        }\n      }\n    };\n    var handleAttributeChanged = function (e) {\n      var object = e.target;\n      if (object.nodeName === Shape.HTML) {\n        var attrName = e.attrName;\n        _this.updateAttribute(attrName, object);\n      }\n    };\n    var handleBoundsChanged = function (e) {\n      var object = e.target;\n      if (object.nodeName === Shape.HTML) {\n        var $el = _this.getOrCreateEl(object);\n        setTransform(object, $el);\n      }\n    };\n    var handleCanvasResize = function () {\n      if (_this.$camera) {\n        var _a = _this.context.config,\n          width = _a.width,\n          height = _a.height;\n        _this.$camera.style.width = \"\".concat(width || 0, \"px\");\n        _this.$camera.style.height = \"\".concat(height || 0, \"px\");\n      }\n    };\n    renderingService.hooks.init.tap(HTMLRenderingPlugin.tag, function () {\n      canvas.addEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n    renderingService.hooks.endFrame.tap(HTMLRenderingPlugin.tag, function () {\n      if (_this.$camera && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)) {\n        _this.$camera.style.transform = _this.joinTransformMatrix(camera.getOrthoMatrix());\n      }\n    });\n    renderingService.hooks.destroy.tap(HTMLRenderingPlugin.tag, function () {\n      // remove camera\n      if (_this.$camera) {\n        _this.$camera.remove();\n      }\n      canvas.removeEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n  };\n  HTMLRenderingPlugin.prototype.createCamera = function (camera) {\n    var _a = this.context.config,\n      doc = _a.document,\n      width = _a.width,\n      height = _a.height;\n    var $canvas = this.context.contextService.getDomElement();\n    var $container = $canvas.parentNode;\n    if ($container) {\n      var cameraId = CANVAS_CAMERA_ID;\n      var $existedCamera = $container.querySelector('#' + cameraId);\n      if (!$existedCamera) {\n        var $camera = (doc || document).createElement('div');\n        $existedCamera = $camera;\n        $camera.id = cameraId;\n        // use absolute position\n        $camera.style.position = 'absolute';\n        // account for DOM element's offset @see https://github.com/antvis/G/issues/1150\n        $camera.style.left = \"\".concat($canvas.offsetLeft || 0, \"px\");\n        $camera.style.top = \"\".concat($canvas.offsetTop || 0, \"px\");\n        $camera.style.transformOrigin = 'left top';\n        $camera.style.transform = this.joinTransformMatrix(camera.getOrthoMatrix());\n        // HTML elements should not overflow with canvas @see https://github.com/antvis/G/issues/1163\n        $camera.style.overflow = 'hidden';\n        $camera.style.pointerEvents = 'none';\n        $camera.style.width = \"\".concat(width || 0, \"px\");\n        $camera.style.height = \"\".concat(height || 0, \"px\");\n        $container.appendChild($camera);\n      }\n      return $existedCamera;\n    }\n    return null;\n  };\n  HTMLRenderingPlugin.prototype.getOrCreateEl = function (object) {\n    var doc = this.context.config.document;\n    var $existedElement = this.displayObjectHTMLElementMap.get(object);\n    if (!$existedElement) {\n      $existedElement = (doc || document).createElement('div');\n      object.parsedStyle.$el = $existedElement;\n      this.displayObjectHTMLElementMap.set(object, $existedElement);\n      if (object.id) {\n        $existedElement.id = object.id;\n      }\n      if (object.name) {\n        $existedElement.setAttribute('name', object.name);\n      }\n      if (object.className) {\n        $existedElement.className = object.className;\n      }\n      // use absolute position\n      $existedElement.style.position = 'absolute';\n      // @see https://github.com/antvis/G/issues/1150\n      $existedElement.style.left = \"0px\";\n      $existedElement.style.top = \"0px\";\n      $existedElement.style['will-change'] = 'transform';\n      $existedElement.style.transform = this.joinTransformMatrix(object.getWorldTransform());\n    }\n    return $existedElement;\n  };\n  HTMLRenderingPlugin.prototype.updateAttribute = function (name, object) {\n    var $el = this.getOrCreateEl(object);\n    switch (name) {\n      case 'innerHTML':\n        var innerHTML = object.parsedStyle.innerHTML;\n        if (isString(innerHTML)) {\n          $el.innerHTML = innerHTML;\n        } else {\n          $el.innerHTML = '';\n          $el.appendChild(innerHTML);\n        }\n        break;\n      case 'transformOrigin':\n        var transformOrigin = object.parsedStyle.transformOrigin;\n        $el.style['transform-origin'] = \"\".concat(transformOrigin[0].value, \" \").concat(transformOrigin[1].value);\n        break;\n      case 'width':\n        if (this.context.enableCSSParsing) {\n          var width = object.computedStyleMap().get('width');\n          $el.style.width = width.toString();\n        } else {\n          var width = object.parsedStyle.width;\n          $el.style.width = isNumber(width) ? \"\".concat(width, \"px\") : width.toString();\n        }\n        break;\n      case 'height':\n        if (this.context.enableCSSParsing) {\n          var height = object.computedStyleMap().get('height');\n          $el.style.height = height.toString();\n        } else {\n          var height = object.parsedStyle.height;\n          $el.style.height = isNumber(height) ? \"\".concat(height, \"px\") : height.toString();\n        }\n        break;\n      case 'zIndex':\n        var zIndex = object.parsedStyle.zIndex;\n        $el.style['z-index'] = \"\".concat(zIndex);\n        break;\n      case 'visibility':\n        var visibility = object.parsedStyle.visibility;\n        $el.style.visibility = visibility;\n        break;\n      case 'pointerEvents':\n        var pointerEvents = object.parsedStyle.pointerEvents;\n        $el.style.pointerEvents = pointerEvents;\n        break;\n      case 'opacity':\n        var opacity = object.parsedStyle.opacity;\n        $el.style.opacity = \"\".concat(opacity);\n        break;\n      case 'fill':\n        var fill = object.parsedStyle.fill;\n        var color = '';\n        if (isCSSRGB(fill)) {\n          if (fill.isNone) {\n            color = 'transparent';\n          } else {\n            color = object.getAttribute('fill');\n          }\n        } else if (Array.isArray(fill)) {\n          color = object.getAttribute('fill');\n        } else if (isPattern(fill)) ;\n        $el.style.background = color;\n        break;\n      case 'stroke':\n        var stroke = object.parsedStyle.stroke;\n        var borderColor = '';\n        if (isCSSRGB(stroke)) {\n          if (stroke.isNone) {\n            borderColor = 'transparent';\n          } else {\n            borderColor = object.getAttribute('stroke');\n          }\n        } else if (Array.isArray(stroke)) {\n          borderColor = object.getAttribute('stroke');\n        } else if (isPattern(stroke)) ;\n        $el.style['border-color'] = borderColor;\n        $el.style['border-style'] = 'solid';\n        break;\n      case 'lineWidth':\n        var lineWidth = object.parsedStyle.lineWidth;\n        $el.style['border-width'] = \"\".concat(lineWidth || 0, \"px\");\n        break;\n      case 'lineDash':\n        $el.style['border-style'] = 'dashed';\n        break;\n      case 'filter':\n        var filter = object.style.filter;\n        $el.style.filter = filter;\n        break;\n      default:\n        if (name !== 'x' && name !== 'y') {\n          if (!isNil(object.style[name]) && object.style[name] !== '') {\n            $el.style[name] = object.style[name];\n          }\n        }\n    }\n  };\n  HTMLRenderingPlugin.tag = 'HTMLRendering';\n  return HTMLRenderingPlugin;\n}();\nvar Plugin = /** @class */function (_super) {\n  __extends(Plugin, _super);\n  function Plugin() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this.name = 'html-renderer';\n    return _this;\n  }\n  Plugin.prototype.init = function () {\n    this.addRenderingPlugin(new HTMLRenderingPlugin());\n  };\n  Plugin.prototype.destroy = function () {\n    this.removeAllRenderingPlugins();\n  };\n  return Plugin;\n}(AbstractRendererPlugin);\nexport { Plugin };","map":{"version":3,"names":["CANVAS_CAMERA_ID","HTMLRenderingPlugin","displayObjectHTMLElementMap","WeakMap","prototype","joinTransformMatrix","matrix","concat","join","apply","context","runtime","_this","camera","renderingContext","renderingService","canvas","root","ownerDocument","defaultView","nativeHTMLMap","eventService","setTransform","object","$el","style","transform","getWorldTransform","handleMounted","e","target","nodeName","Shape","HTML","$camera","createCamera","$el_1","getOrCreateEl","appendChild","enableCSSParsing","attributes_1","documentElement","attributes","Object","keys","forEach","name","updateAttribute","set","handleUnmounted","remove","delete","handleAttributeChanged","attrName","handleBoundsChanged","handleCanvasResize","_a","config","width","height","hooks","init","tap","tag","addEventListener","CanvasEvent","RESIZE","ElementEvent","MOUNTED","UNMOUNTED","ATTR_MODIFIED","BOUNDS_CHANGED","endFrame","renderReasons","has","RenderReason","CAMERA_CHANGED","getOrthoMatrix","destroy","removeEventListener","doc","document","$canvas","contextService","getDomElement","$container","parentNode","cameraId","$existedCamera","querySelector","createElement","id","position","left","offsetLeft","top","offsetTop","transformOrigin","overflow","pointerEvents","$existedElement","get","parsedStyle","setAttribute","className","innerHTML","isString","value","computedStyleMap","toString","isNumber","zIndex","visibility","opacity","fill","color","isCSSRGB","isNone","getAttribute","Array","isArray","isPattern","background","stroke","borderColor","lineWidth","filter","isNil","Plugin","_super","__extends","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"sources":["../src/packages/g-plugin-html-renderer/src/HTMLRenderingPlugin.ts","../src/packages/g-plugin-html-renderer/src/index.ts"],"sourcesContent":[null,null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}