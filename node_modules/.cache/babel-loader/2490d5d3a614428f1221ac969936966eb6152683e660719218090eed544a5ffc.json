{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { isFunction } from '@antv/util';\nimport { addWave } from './wave';\nimport { LiquidShapesPath } from './shapes';\nconst getLiquidShape = (shape = 'circle') => LiquidShapesPath[shape] || LiquidShapesPath.circle;\nexport const Liquid = (options, context) => {\n  if (!context) return;\n  const {\n    coordinate\n  } = context;\n  const {\n    liquidOptions,\n    styleOptions\n  } = options;\n  const {\n    liquidShape,\n    percent\n  } = liquidOptions;\n  const {\n      background: backgroundStyle,\n      outline = {},\n      wave = {}\n    } = styleOptions,\n    attr = __rest(styleOptions, [\"background\", \"outline\", \"wave\"]);\n  const {\n      border = 2,\n      distance = 0\n    } = outline,\n    outlineStyle = __rest(outline, [\"border\", \"distance\"]);\n  const {\n    length = 192,\n    count = 3\n  } = wave;\n  return (points, cfg, defaultAttr) => {\n    const {\n      document\n    } = context.canvas;\n    const {\n      color,\n      fillOpacity\n    } = defaultAttr;\n    const attrs = Object.assign(Object.assign({\n      fill: color\n    }, defaultAttr), attr);\n    const g = document.createElement('g', {});\n    // Center x/y.\n    const [centerX, centerY] = coordinate.getCenter();\n    // [width,height].\n    const size = coordinate.getSize();\n    const radius = Math.min(...size) / 2;\n    // 1、Gets the path of the overall shape.\n    const buildPath = isFunction(liquidShape) ? liquidShape : getLiquidShape(liquidShape);\n    const shapePath = buildPath(centerX, centerY, radius, ...size);\n    // 2、Background create.\n    if (Object.keys(backgroundStyle).length) {\n      const backgroundShape = document.createElement('path', {\n        style: Object.assign({\n          path: shapePath,\n          fill: '#fff'\n        }, backgroundStyle)\n      });\n      g.appendChild(backgroundShape);\n    }\n    // Percent > 0 Mapping water waves.\n    if (percent > 0) {\n      // 3. Clip create.\n      const clipShape = document.createElement('path', {\n        style: {\n          path: shapePath\n        }\n      });\n      g.appendChild(clipShape);\n      g.style.clipPath = clipShape;\n      // 4. Wave create.\n      addWave(centerX, centerY, 1 - percent, count, attrs, g, clipShape.getBBox().y, radius * 2, length, true, document);\n    }\n    // 5. Draw distance.\n    const distanceShape = document.createElement('path', {\n      style: {\n        path: shapePath,\n        fill: 'transparent',\n        lineWidth: border + 2 * distance,\n        stroke: '#fff'\n      }\n    });\n    // 6. Draw border.\n    const borderShape = document.createElement('path', {\n      style: Object.assign(Object.assign(Object.assign({\n        path: shapePath,\n        stroke: color,\n        strokeOpacity: fillOpacity,\n        lineWidth: border\n      }, attrs), outlineStyle), {\n        fill: 'transparent'\n      })\n    });\n    g.appendChild(distanceShape);\n    g.appendChild(borderShape);\n    return g;\n  };\n};\nLiquid.props = {};","map":{"version":3,"names":["isFunction","addWave","LiquidShapesPath","getLiquidShape","shape","circle","Liquid","options","context","coordinate","liquidOptions","styleOptions","liquidShape","percent","background","backgroundStyle","outline","wave","attr","__rest","border","distance","outlineStyle","length","count","points","cfg","defaultAttr","document","canvas","color","fillOpacity","attrs","Object","assign","fill","g","createElement","centerX","centerY","getCenter","size","getSize","radius","Math","min","buildPath","shapePath","keys","backgroundShape","style","path","appendChild","clipShape","clipPath","getBBox","y","distanceShape","lineWidth","stroke","borderShape","strokeOpacity","props"],"sources":["shape/liquid/liquid.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}