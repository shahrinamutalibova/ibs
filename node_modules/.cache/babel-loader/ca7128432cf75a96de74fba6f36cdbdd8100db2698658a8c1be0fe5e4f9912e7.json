{"ast":null,"code":"import { __assign, __extends, __read } from \"tslib\";\nimport { deepMix, isNil, pick } from '@antv/util';\nimport { Component } from '../../core';\nimport { Text } from '../../shapes';\nimport { maybeAppend, parseSeriesAttr, subStyleProps } from '../../util';\nimport { Tag } from '../tag';\nvar Breadcrumb = /** @class */function (_super) {\n  __extends(Breadcrumb, _super);\n  /**\n   *\n   * @param options\n   */\n  function Breadcrumb(options) {\n    return _super.call(this, deepMix({}, Breadcrumb.defaultOptions, options)) || this;\n  }\n  Breadcrumb.prototype.render = function (attributes, container) {\n    var x = attributes.x,\n      y = attributes.y,\n      items = attributes.items,\n      textStyle = attributes.textStyle,\n      _a = attributes.padding,\n      padding = _a === void 0 ? 0 : _a,\n      width = attributes.width,\n      separator = attributes.separator;\n    var _b = __read(parseSeriesAttr(padding), 3),\n      top = _b[0],\n      right = _b[1],\n      left = _b[2];\n    var tagStyle = subStyleProps(attributes, 'tag');\n    var selection = maybeAppend(container, '.container', 'g').styles({\n      className: 'container',\n      x: x + left,\n      y: y + top\n    });\n    var cursorX = 0;\n    var cursorY = 0;\n    selection.node().removeChildren();\n    var _loop_1 = function (i) {\n      var datum = items[i];\n      var shape = new Tag({\n        className: 'breadcrumb-item',\n        style: __assign(__assign(__assign(__assign({\n          x: cursorX,\n          y: cursorY\n        }, tagStyle), {\n          text: isNil(datum.text) ? datum.id : datum.text\n        }), pick(datum, ['marker'])), {\n          // 强制不需要背景\n          padding: 0\n        })\n      });\n      selection.append(function () {\n        return shape;\n      });\n      var bounds = shape.getLocalBounds();\n      var shapeW = bounds.halfExtents[0] * 2;\n      var shapeH = bounds.halfExtents[1] * 2;\n      cursorX += shapeW;\n      // todo 换行策略还需要考虑 分隔符\n      if (!isNil(width)) {\n        var avaliableWidth = width - right;\n        if (cursorX > avaliableWidth) {\n          shape.attr({\n            x: 0,\n            y: cursorY + shapeH\n          });\n          // 更新光标\n          cursorX = shapeW;\n          cursorY += shapeH;\n        }\n      }\n      // 绑定事件\n      this_1.bindInnerEvents(shape, datum);\n      var _c = separator || {},\n        _d = _c.spacing,\n        spacing = _d === void 0 ? 0 : _d,\n        _e = _c.text,\n        text = _e === void 0 ? '/' : _e,\n        style = _c.style;\n      // 最后一个分隔符，不需要渲染\n      if (i !== items.length - 1) {\n        var shape_1 = new Text({\n          className: \"\".concat(Breadcrumb.tag, \"-separator\"),\n          id: \"\".concat(Breadcrumb.tag, \"-separator-\").concat(i),\n          style: __assign(__assign({\n            x: cursorX + spacing,\n            y: cursorY + shapeH / 2\n          }, style), {\n            text: text,\n            textAlign: 'end',\n            textBaseline: 'middle'\n          })\n        });\n        selection.append(function () {\n          return shape_1;\n        });\n        var bounds_1 = shape_1.getLocalBounds();\n        cursorX += bounds_1.halfExtents[0] * 2 + spacing;\n      }\n    };\n    var this_1 = this;\n    for (var i = 0; i < items.length; i++) {\n      _loop_1(i);\n    }\n  };\n  /**\n   * 组件更新\n   * @param cfg\n   */\n  Breadcrumb.prototype.update = function (cfg) {\n    this.attr(deepMix({}, this.attributes, cfg));\n    this.render(this.attributes, this);\n  };\n  /**\n   * 面包屑绑定事件\n   * @param shape\n   * @param item\n   */\n  Breadcrumb.prototype.bindInnerEvents = function (shape, item) {\n    var _a = this.attributes,\n      items = _a.items,\n      onClick = _a.onClick;\n    if (onClick) {\n      shape.addEventListener('click', function () {\n        onClick.call(shape, item.id, item, items);\n      });\n    }\n  };\n  /**\n   * 标签类型\n   */\n  Breadcrumb.tag = 'breadcrumb';\n  /**\n   * 默认参数\n   */\n  Breadcrumb.defaultOptions = {\n    style: {\n      separator: {\n        text: '/',\n        style: {\n          fontSize: 14,\n          fill: 'rgba(0, 0, 0, 0.45)'\n        },\n        spacing: 8\n      },\n      textStyle: {\n        default: {\n          fontSize: 14,\n          fill: 'rgba(0, 0, 0, 0.45)'\n        },\n        active: {\n          fill: '#5468ff',\n          cursor: 'pointer'\n        }\n      },\n      padding: [8, 8, 8, 8]\n    }\n  };\n  return Breadcrumb;\n}(Component);\nexport { Breadcrumb };","map":{"version":3,"names":["deepMix","isNil","pick","Component","Text","maybeAppend","parseSeriesAttr","subStyleProps","Tag","Breadcrumb","_super","__extends","options","call","defaultOptions","prototype","render","attributes","container","x","y","items","textStyle","_a","padding","width","separator","_b","__read","top","right","left","tagStyle","selection","styles","className","cursorX","cursorY","node","removeChildren","i","datum","shape","style","__assign","text","id","append","bounds","getLocalBounds","shapeW","halfExtents","shapeH","avaliableWidth","attr","this_1","bindInnerEvents","_c","_d","spacing","_e","length","shape_1","concat","tag","textAlign","textBaseline","bounds_1","update","cfg","item","onClick","addEventListener","fontSize","fill","default","active","cursor"],"sources":["ui/breadcrumb/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}