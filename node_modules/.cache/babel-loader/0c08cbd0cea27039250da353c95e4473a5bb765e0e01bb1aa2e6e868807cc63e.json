{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { deepMix } from '@antv/util';\nimport { WordCloud as WordCloudTransform } from '../data';\nfunction initializeData(data, encode) {\n  const {\n    text = 'text',\n    value = 'value'\n  } = encode;\n  return data.map(d => Object.assign(Object.assign({}, d), {\n    text: d[text],\n    value: d[value]\n  }));\n}\nconst GET_DEFAULT_LAYOUT_OPTIONS = (width, height) => ({\n  size: [width, height]\n});\nconst GET_DEFAULT_OPTIONS = (width, height) => ({\n  axis: false,\n  type: 'text',\n  encode: {\n    x: 'x',\n    y: 'y',\n    text: 'text',\n    rotate: 'rotate',\n    fontSize: 'size'\n  },\n  scale: {\n    x: {\n      domain: [0, width],\n      range: [0, 1]\n    },\n    y: {\n      domain: [0, height],\n      range: [0, 1]\n    },\n    fontSize: {\n      type: 'identity'\n    },\n    rotate: {\n      type: 'identity'\n    }\n  },\n  style: {\n    textAlign: 'center'\n  }\n});\nexport const WordCloud = (options, context) => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    width,\n    height\n  } = context;\n  const {\n      data,\n      encode = {},\n      scale,\n      style = {},\n      layout = {}\n    } = options,\n    resOptions = __rest(options, [\"data\", \"encode\", \"scale\", \"style\", \"layout\"]);\n  const initializedData = initializeData(data, encode);\n  const transformData = yield WordCloudTransform(Object.assign(Object.assign({}, GET_DEFAULT_LAYOUT_OPTIONS(width, height)), layout))(initializedData);\n  return deepMix({}, GET_DEFAULT_OPTIONS(width, height), Object.assign(Object.assign({\n    data: transformData,\n    encode,\n    scale,\n    style\n  }, resOptions), {\n    axis: false\n  }));\n});\nWordCloud.props = {};","map":{"version":3,"names":["deepMix","WordCloud","WordCloudTransform","initializeData","data","encode","text","value","map","d","Object","assign","GET_DEFAULT_LAYOUT_OPTIONS","width","height","size","GET_DEFAULT_OPTIONS","axis","type","x","y","rotate","fontSize","scale","domain","range","style","textAlign","options","context","__awaiter","layout","resOptions","__rest","initializedData","transformData","props"],"sources":["mark/wordCloud.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,OAAO,QAAQ,YAAY;AAGpC,SAASC,SAAS,IAAIC,kBAAkB,QAAQ,SAAS;AAIzD,SAASC,cAAcA,CAACC,IAAI,EAAEC,MAAM;EAClC,MAAM;IAAEC,IAAI,GAAG,MAAM;IAAEC,KAAK,GAAG;EAAO,CAAE,GAAGF,MAAM;EACjD,OAAOD,IAAI,CAACI,GAAG,CAAEC,CAAC,IAAKC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAClBF,CAAC;IACJH,IAAI,EAAEG,CAAC,CAACH,IAAI,CAAC;IACbC,KAAK,EAAEE,CAAC,CAACF,KAAK;EAAC,EACf,CAAC;AACL;AAEA,MAAMK,0BAA0B,GAAGA,CAACC,KAAK,EAAEC,MAAM,MAAM;EACrDC,IAAI,EAAE,CAACF,KAAK,EAAEC,MAAM;CACrB,CAAC;AAEF,MAAME,mBAAmB,GAAGA,CAACH,KAAK,EAAEC,MAAM,MAAM;EAC9CG,IAAI,EAAE,KAAK;EACXC,IAAI,EAAE,MAAM;EACZb,MAAM,EAAE;IACNc,CAAC,EAAE,GAAG;IACNC,CAAC,EAAE,GAAG;IACNd,IAAI,EAAE,MAAM;IACZe,MAAM,EAAE,QAAQ;IAChBC,QAAQ,EAAE;GACX;EACDC,KAAK,EAAE;IACLJ,CAAC,EAAE;MAAEK,MAAM,EAAE,CAAC,CAAC,EAAEX,KAAK,CAAC;MAAEY,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;IAAC,CAAE;IACxCL,CAAC,EAAE;MAAEI,MAAM,EAAE,CAAC,CAAC,EAAEV,MAAM,CAAC;MAAEW,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;IAAC,CAAE;IACzCH,QAAQ,EAAE;MAAEJ,IAAI,EAAE;IAAU,CAAE;IAC9BG,MAAM,EAAE;MAAEH,IAAI,EAAE;IAAU;GAC3B;EACDQ,KAAK,EAAE;IACLC,SAAS,EAAE;;CAEd,CAAC;AAEF,OAAO,MAAM1B,SAAS,GAAyBA,CAAO2B,OAAO,EAAEC,OAAO,KAAIC,SAAA;EACxE,MAAM;IAAEjB,KAAK;IAAEC;EAAM,CAAE,GAAGe,OAAO;EAEjC,MAAM;MACJzB,IAAI;MACJC,MAAM,GAAG,EAAE;MACXkB,KAAK;MACLG,KAAK,GAAG,EAAE;MACVK,MAAM,GAAG;IAAE,IAETH,OAAO;IADNI,UAAU,GAAAC,MAAA,CACXL,OAAO,EAPL,8CAOL,CAAU;EAEX,MAAMM,eAAe,GAAG/B,cAAc,CAACC,IAAI,EAAEC,MAAM,CAAC;EAEpD,MAAM8B,aAAa,GAAG,MAAMjC,kBAAkB,CAAAQ,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACzCC,0BAA0B,CAACC,KAAK,EAAEC,MAAM,CAAC,GACzCiB,MAAM,EACT,CAACG,eAAe,CAAC;EAEnB,OAAOlC,OAAO,CAAC,EAAE,EAAEgB,mBAAmB,CAACH,KAAK,EAAEC,MAAM,CAAC,EAAAJ,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA;IACnDP,IAAI,EAAE+B,aAAa;IACnB9B,MAAM;IACNkB,KAAK;IACLG;EAAK,GACFM,UAAU;IACbf,IAAI,EAAE;EAAK,GACX;AACJ,CAAC;AAEDhB,SAAS,CAACmC,KAAK,GAAG,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}