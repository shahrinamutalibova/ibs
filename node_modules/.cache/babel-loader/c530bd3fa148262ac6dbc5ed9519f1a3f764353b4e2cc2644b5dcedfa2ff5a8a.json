{"ast":null,"code":"import { __assign, __extends, __rest } from \"tslib\";\nimport { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { ifShow, select } from '../../util';\nimport { bowtie, circle, cross, dash, diamond, dot, hexagon, hv, hvh, hyphen, line, plus, point, smooth, square, tick, triangle, triangleDown, vh, vhv } from './symbol';\nimport { parseMarker } from './utils';\nfunction getType(symbol) {\n  var markerType = parseMarker(symbol);\n  if (['base64', 'url', 'image'].includes(markerType)) {\n    return 'image';\n  }\n  if (symbol && markerType === 'symbol') {\n    return 'path';\n  }\n  return null;\n}\nvar Marker = /** @class */function (_super) {\n  __extends(Marker, _super);\n  function Marker() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Marker.prototype.render = function (attributes, container) {\n    var symbol = attributes.symbol,\n      _a = attributes.size,\n      size = _a === void 0 ? 16 : _a,\n      style = __rest(attributes, [\"symbol\", \"size\"]);\n    var type = getType(symbol);\n    ifShow(!!type, select(container), function (group) {\n      group.maybeAppendByClassName(\"marker\", type).attr('className', \"marker \".concat(type, \"-marker\")).call(function (selection) {\n        if (type === 'image') {\n          // todo 大小和 path symbol 保持一致\n          var r = size * 2;\n          selection.styles({\n            img: symbol,\n            width: r,\n            height: r,\n            x: -size,\n            y: -size\n          });\n        } else {\n          var r = size / 2;\n          var symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n          selection.styles(__assign({\n            path: symbolFn === null || symbolFn === void 0 ? void 0 : symbolFn(0, 0, r)\n          }, style));\n        }\n      });\n    });\n  };\n  Marker.MARKER_SYMBOL_MAP = new Map();\n  /**\n   * 注册 icon 类型\n   * @param type\n   * @param path\n   */\n  Marker.registerSymbol = function (type, symbol) {\n    Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n  };\n  /**\n   * 获取已经注册的 icon 的 path\n   */\n  Marker.getSymbol = function (type) {\n    return Marker.MARKER_SYMBOL_MAP.get(type);\n  };\n  /**\n   * @returns 获取已经注册的 icon 的类型\n   */\n  Marker.getSymbols = function () {\n    return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n  };\n  return Marker;\n}(Component);\nexport { Marker };\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);","map":{"version":3,"names":["isFunction","Component","ifShow","select","bowtie","circle","cross","dash","diamond","dot","hexagon","hv","hvh","hyphen","line","plus","point","smooth","square","tick","triangle","triangleDown","vh","vhv","parseMarker","getType","symbol","markerType","includes","Marker","_super","__extends","prototype","render","attributes","container","_a","size","style","__rest","type","group","maybeAppendByClassName","attr","concat","call","selection","r","styles","img","width","height","x","y","symbolFn","getSymbol","__assign","path","MARKER_SYMBOL_MAP","Map","registerSymbol","set","get","getSymbols","Array","from","keys"],"sources":["ui/marker/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}