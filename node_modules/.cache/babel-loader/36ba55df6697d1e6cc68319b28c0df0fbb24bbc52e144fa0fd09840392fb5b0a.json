{"ast":null,"code":"import { __read, __spreadArray } from \"tslib\";\nimport { get } from '@antv/util';\nimport { transition } from '../../../animation';\nimport { degToRad, keyframeInterpolate, omit, renderExtDo, scaleToPixel, subStyleProps } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { getLineAngle, getLineTangentVector } from './utils';\nexport function getLinearValuePos(value, attr) {\n  var _a = __read(attr.startPos, 2),\n    sx = _a[0],\n    sy = _a[1],\n    _b = __read(attr.endPos, 2),\n    ex = _b[0],\n    ey = _b[1];\n  var _c = __read([ex - sx, ey - sy], 2),\n    dx = _c[0],\n    dy = _c[1];\n  return [sx + dx * value, sy + dy * value];\n}\nexport function getArcValuePos(value, attr) {\n  var radius = attr.radius,\n    _a = __read(attr.center, 2),\n    cx = _a[0],\n    cy = _a[1];\n  var angle = degToRad(getLineAngle(value, attr));\n  return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n}\nexport function getValuePos(value, attr) {\n  if (attr.type === 'linear') return getLinearValuePos(value, attr);\n  return getArcValuePos(value, attr);\n}\nexport function isAxisHorizontal(attr) {\n  return getLineTangentVector(0, attr)[1] === 0;\n}\nexport function isAxisVertical(attr) {\n  return getLineTangentVector(0, attr)[0] === 0;\n}\nfunction isCircle(startAngle, endAngle) {\n  return endAngle - startAngle === 360;\n}\nfunction getArcPath(startAngle, endAngle, cx, cy, radius) {\n  var diffAngle = endAngle - startAngle;\n  var _a = __read([radius, radius], 2),\n    rx = _a[0],\n    ry = _a[1];\n  var _b = __read([degToRad(startAngle), degToRad(endAngle)], 2),\n    startAngleRadians = _b[0],\n    endAngleRadians = _b[1];\n  var getPosByAngle = function (angle) {\n    return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n  };\n  var _c = __read(getPosByAngle(startAngleRadians), 2),\n    x1 = _c[0],\n    y1 = _c[1];\n  var _d = __read(getPosByAngle(endAngleRadians), 2),\n    x2 = _d[0],\n    y2 = _d[1];\n  if (isCircle(startAngle, endAngle)) {\n    var middleAngleRadians = (endAngleRadians + startAngleRadians) / 2;\n    var _e = __read(getPosByAngle(middleAngleRadians), 2),\n      xm = _e[0],\n      ym = _e[1];\n    return [['M', x1, y1], ['A', rx, ry, 0, 1, 0, xm, ym], ['A', rx, ry, 0, 1, 0, x2, y2]];\n  }\n  // 大小弧\n  var large = diffAngle > 180 ? 1 : 0;\n  // 1-顺时针 0-逆时针\n  var sweep = startAngle > endAngle ? 0 : 1;\n  var isClosePath = false;\n  return isClosePath ? \"M\".concat(cx, \",\").concat(cy, \",L\").concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2, \",L\").concat(cx, \",\").concat(cy) : \"M\".concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,\").concat(large, \",\").concat(sweep, \",\").concat(x2, \",\").concat(y2);\n}\nfunction getArcAttr(arc) {\n  var _a = arc.attributes,\n    startAngle = _a.startAngle,\n    endAngle = _a.endAngle,\n    center = _a.center,\n    radius = _a.radius;\n  return __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false);\n}\nfunction renderArc(container, attr, style, animate) {\n  var startAngle = attr.startAngle,\n    endAngle = attr.endAngle,\n    center = attr.center,\n    radius = attr.radius;\n  return container.selectAll(CLASS_NAMES.line.class).data([{\n    path: getArcPath.apply(void 0, __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false))\n  }], function (d, i) {\n    return i;\n  }).join(function (enter) {\n    return enter.append('path').attr('className', CLASS_NAMES.line.name).styles(attr).styles({\n      path: function (d) {\n        return d.path;\n      }\n    });\n  }, function (update) {\n    return update.transition(function () {\n      var _this = this;\n      var animation = keyframeInterpolate(this, getArcAttr(this), __spreadArray(__spreadArray([startAngle, endAngle], __read(center), false), [radius], false), animate.update);\n      if (animation) {\n        var layout = function () {\n          var data = get(_this.attributes, '__keyframe_data__');\n          _this.style.path = getArcPath.apply(void 0, __spreadArray([], __read(data), false));\n        };\n        animation.onframe = layout;\n        animation.onfinish = layout;\n      }\n      return animation;\n    }).styles(attr);\n  }, function (exit) {\n    return exit.remove();\n  }).styles(style).transitions();\n}\nfunction renderTruncation(container, _a) {\n  var truncRange = _a.truncRange,\n    truncShape = _a.truncShape,\n    lineExtension = _a.lineExtension;\n  // TODO\n}\nfunction extendLine(startPos, endPos, range) {\n  if (range === void 0) {\n    range = [0, 0];\n  }\n  var _a = __read([startPos, endPos, range], 3),\n    _b = __read(_a[0], 2),\n    x1 = _b[0],\n    y1 = _b[1],\n    _c = __read(_a[1], 2),\n    x2 = _c[0],\n    y2 = _c[1],\n    _d = __read(_a[2], 2),\n    l1 = _d[0],\n    l2 = _d[1];\n  var _e = __read([x2 - x1, y2 - y1], 2),\n    x = _e[0],\n    y = _e[1];\n  var L = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n  var _f = __read([-l1 / L, l2 / L], 2),\n    s1 = _f[0],\n    s2 = _f[1];\n  return [s1 * x, s1 * y, s2 * x, s2 * y];\n}\nfunction getLinePath(points) {\n  var _a = __read(points, 2),\n    _b = __read(_a[0], 2),\n    x1 = _b[0],\n    y1 = _b[1],\n    _c = __read(_a[1], 2),\n    x2 = _c[0],\n    y2 = _c[1];\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2\n  };\n}\nfunction renderLinear(container, attr, style, animate) {\n  var showTrunc = attr.showTrunc,\n    startPos = attr.startPos,\n    endPos = attr.endPos,\n    truncRange = attr.truncRange,\n    lineExtension = attr.lineExtension;\n  var _a = __read([startPos, endPos], 2),\n    _b = __read(_a[0], 2),\n    x1 = _b[0],\n    y1 = _b[1],\n    _c = __read(_a[1], 2),\n    x2 = _c[0],\n    y2 = _c[1];\n  var _d = __read(lineExtension ? extendLine(startPos, endPos, lineExtension) : new Array(4).fill(0), 4),\n    ox1 = _d[0],\n    oy1 = _d[1],\n    ox2 = _d[2],\n    oy2 = _d[3];\n  var renderLine = function (data) {\n    return container.selectAll(CLASS_NAMES.line.class).data(data, function (d, i) {\n      return i;\n    }).join(function (enter) {\n      return enter.append('line').attr('className', function (d) {\n        return \"\".concat(CLASS_NAMES.line.name, \" \").concat(d.className);\n      }).styles(style).transition(function (d) {\n        return transition(this, getLinePath(d.line), false);\n      });\n    }, function (update) {\n      return update.styles(style).transition(function (_a) {\n        var line = _a.line;\n        return transition(this, getLinePath(line), animate.update);\n      });\n    }, function (exit) {\n      return exit.remove();\n    }).transitions();\n  };\n  if (!showTrunc || !truncRange) {\n    return renderLine([{\n      line: [[x1 + ox1, y1 + oy1], [x2 + ox2, y2 + oy2]],\n      className: CLASS_NAMES.line.name\n    }]);\n  }\n  var _e = __read(truncRange, 2),\n    r1 = _e[0],\n    r2 = _e[1];\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  var _f = __read([x1 + dx * r1, y1 + dy * r1], 2),\n    x3 = _f[0],\n    y3 = _f[1];\n  var _g = __read([x1 + dx * r2, y1 + dy * r2], 2),\n    x4 = _g[0],\n    y4 = _g[1];\n  var animation = renderLine([{\n    line: [[x1 + ox1, y1 + oy1], [x3, y3]],\n    className: CLASS_NAMES.lineFirst.name\n  }, {\n    line: [[x4, y4], [x2 + ox2, y2 + oy2]],\n    className: CLASS_NAMES.lineSecond.name\n  }]);\n  renderTruncation(container, attr);\n  return animation;\n}\nfunction renderAxisArrow(container, type, attr, style) {\n  var showArrow = attr.showArrow,\n    showTrunc = attr.showTrunc,\n    lineArrow = attr.lineArrow,\n    lineArrowOffset = attr.lineArrowOffset,\n    lineArrowSize = attr.lineArrowSize;\n  var shapeToAddArrow;\n  if (type === 'arc') shapeToAddArrow = container.select(CLASS_NAMES.line.class);else if (showTrunc) shapeToAddArrow = container.select(CLASS_NAMES.lineSecond.class);else shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n  if (!showArrow || !lineArrow || attr.type === 'arc' && isCircle(attr.startAngle, attr.endAngle)) {\n    var node = shapeToAddArrow.node();\n    if (node) node.style.markerEnd = undefined;\n    return;\n  }\n  var arrow = renderExtDo(lineArrow);\n  arrow.attr(style);\n  scaleToPixel(arrow, lineArrowSize, true);\n  shapeToAddArrow.style('markerEnd', arrow).style('markerEndOffset', -lineArrowOffset);\n}\nexport function renderAxisLine(container, attr, animate) {\n  var type = attr.type;\n  var animation;\n  var style = subStyleProps(attr, 'line');\n  if (type === 'linear') animation = renderLinear(container, attr, omit(style, 'arrow'), animate);else animation = renderArc(container, attr, omit(style, 'arrow'), animate);\n  renderAxisArrow(container, type, attr, style);\n  return animation;\n}","map":{"version":3,"names":["get","transition","degToRad","keyframeInterpolate","omit","renderExtDo","scaleToPixel","subStyleProps","CLASS_NAMES","getLineAngle","getLineTangentVector","getLinearValuePos","value","attr","_a","__read","startPos","sx","sy","_b","endPos","ex","ey","_c","dx","dy","getArcValuePos","radius","center","cx","cy","angle","Math","cos","sin","getValuePos","type","isAxisHorizontal","isAxisVertical","isCircle","startAngle","endAngle","getArcPath","diffAngle","rx","ry","startAngleRadians","endAngleRadians","getPosByAngle","x1","y1","_d","x2","y2","middleAngleRadians","_e","xm","ym","large","sweep","isClosePath","concat","getArcAttr","arc","attributes","__spreadArray","renderArc","container","style","animate","selectAll","line","class","data","path","apply","d","i","join","enter","append","name","styles","update","_this","animation","layout","onframe","onfinish","exit","remove","transitions","renderTruncation","truncRange","truncShape","lineExtension","extendLine","range","l1","l2","x","y","L","sqrt","pow","_f","s1","s2","getLinePath","points","renderLinear","showTrunc","Array","fill","ox1","oy1","ox2","oy2","renderLine","className","r1","r2","x3","y3","_g","x4","y4","lineFirst","lineSecond","renderAxisArrow","showArrow","lineArrow","lineArrowOffset","lineArrowSize","shapeToAddArrow","select","node","markerEnd","undefined","arrow","renderAxisLine"],"sources":["ui/axis/guides/line.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}