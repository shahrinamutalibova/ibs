{"ast":null,"code":"import { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { Linear } from '@antv/scale';\nimport { clamp, isUndefined } from '@antv/util';\nimport { Component } from '../../core';\nimport { BBox, deepAssign, getEventPos, hide, ifShow, select, show, subStyleProps, superStyleProps, toPrecision } from '../../util';\nimport { Axis } from '../axis';\nimport { CLASS_NAMES as AXIS_CLASS_NAMES } from '../axis/constant';\nimport { Indicator } from '../indicator';\nimport { Handle as SliderHandle } from '../slider/handle';\nimport { Title } from '../title';\nimport { CLASS_NAMES, CONTINUOUS_DEFAULT_OPTIONS, STEP_RATIO } from './constant';\nimport { Handle } from './continuous/handle';\nimport { Ribbon } from './continuous/ribbon';\nimport { getNextTickValue } from './continuous/utils';\nimport { getSafetySelections, getStepValueByValue, ifHorizontal } from './utils';\nfunction getMinMax(data) {\n  return {\n    min: Math.min.apply(Math, __spreadArray([], __read(data.map(function (d) {\n      return d.value;\n    })), false)),\n    max: Math.max.apply(Math, __spreadArray([], __read(data.map(function (d) {\n      return d.value;\n    })), false))\n  };\n}\nvar Continuous = /** @class */function (_super) {\n  __extends(Continuous, _super);\n  function Continuous(options) {\n    var _this = _super.call(this, options, CONTINUOUS_DEFAULT_OPTIONS) || this;\n    _this.eventToOffsetScale = new Linear({});\n    _this.innerRibbonScale = new Linear({});\n    _this.cacheLabelBBox = null;\n    _this.cacheHandleBBox = null;\n    _this.onHovering = function (e) {\n      var _a = _this.attributes,\n        data = _a.data,\n        block = _a.block;\n      e.stopPropagation();\n      var value = _this.getValueByCanvasPoint(e);\n      if (block) {\n        var range = getNextTickValue(data.map(function (_a) {\n          var value = _a.value;\n          return value;\n        }), value).range;\n        _this.showIndicator((range[0] + range[1]) / 2, \"\".concat(range[0], \"-\").concat(range[1]));\n        _this.dispatchIndicated(value, range);\n      } else {\n        var safetyValue = _this.getTickValue(value);\n        _this.showIndicator(safetyValue);\n        _this.dispatchIndicated(safetyValue);\n      }\n    };\n    _this.onDragStart = function (target) {\n      return function (e) {\n        e.stopPropagation();\n        // 关闭滑动\n        if (!_this.attributes.slidable) return;\n        _this.target = target;\n        _this.prevValue = _this.getTickValue(_this.getValueByCanvasPoint(e));\n        document.addEventListener('mousemove', _this.onDragging);\n        document.addEventListener('touchmove', _this.onDragging);\n        document.addEventListener('mouseleave', _this.onDragEnd);\n        document.addEventListener('mouseup', _this.onDragEnd);\n        document.addEventListener('mouseup', _this.onDragEnd);\n        document.addEventListener('touchend', _this.onDragEnd);\n      };\n    };\n    _this.onDragging = function (e) {\n      var target = _this.target;\n      _this.updateMouse();\n      var _a = __read(_this.selection, 2),\n        start = _a[0],\n        end = _a[1];\n      var currValue = _this.getTickValue(_this.getValueByCanvasPoint(e));\n      var diffValue = currValue - _this.prevValue;\n      if (target === 'start') start !== currValue && _this.updateSelection(currValue, end);else if (target === 'end') end !== currValue && _this.updateSelection(start, currValue);else if (target === 'ribbon' && diffValue !== 0) {\n        _this.prevValue = currValue;\n        _this.updateSelection(diffValue, diffValue, true);\n      }\n    };\n    _this.onDragEnd = function () {\n      _this.style.cursor = 'pointer';\n      document.removeEventListener('mousemove', _this.onDragging);\n      document.removeEventListener('touchmove', _this.onDragging);\n      document.removeEventListener('mouseup', _this.onDragEnd);\n      document.removeEventListener('touchend', _this.onDragEnd);\n    };\n    return _this;\n  }\n  Object.defineProperty(Continuous.prototype, \"handleOffsetRatio\", {\n    get: function () {\n      return this.ifHorizontal(0.5, 0.5);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.getBBox = function () {\n    var _a = this.attributes,\n      width = _a.width,\n      height = _a.height;\n    return new BBox(0, 0, width, height);\n  };\n  Continuous.prototype.render = function (attributes, container) {\n    var _this = this;\n    // 渲染顺序\n    // 1. 绘制 title, 获得可用空间\n    // 2. 绘制 label, handle\n    // 3. 基于可用空间、label高度、handle 宽高，计算 ribbon 宽高\n    // 4. 绘制 ribbon\n    // 5. 调整 label、handle 位置\n    var showLabel = attributes.showLabel;\n    /** title */\n    this.renderTitle(select(container));\n    var _a = this.availableSpace,\n      x = _a.x,\n      y = _a.y;\n    /** label */\n    /** content */\n    var contentGroup = select(container).maybeAppendByClassName(CLASS_NAMES.contentGroup, 'g').styles({\n      x: x,\n      y: y\n    });\n    var labelGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles({\n      zIndex: 1\n    });\n    ifShow(!!showLabel, labelGroup, function (group) {\n      _this.renderLabel(group);\n    });\n    var ribbonGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.ribbonGroup, 'g').styles({\n      zIndex: 0\n    });\n    /** handle */\n    this.handlesGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.handlesGroup, 'g').styles({\n      zIndex: 2\n    });\n    this.renderHandles();\n    /** ribbon */\n    this.renderRibbon(ribbonGroup);\n    this.renderIndicator(contentGroup);\n    /** adjust */\n    this.adjustLabel();\n    this.adjustHandles();\n    // this.adjustTitle();\n  };\n  Object.defineProperty(Continuous.prototype, \"range\", {\n    get: function () {\n      var _a = this.attributes,\n        data = _a.data,\n        domain = _a.domain;\n      return domain ? {\n        min: domain[0],\n        max: domain[1]\n      } : getMinMax(data);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"ribbonScale\", {\n    get: function () {\n      var _a = this.range,\n        min = _a.min,\n        max = _a.max;\n      this.innerRibbonScale.update({\n        domain: [min, max],\n        range: [0, 1]\n      });\n      return this.innerRibbonScale;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"ribbonRange\", {\n    get: function () {\n      var _a = __read(this.selection, 2),\n        min = _a[0],\n        max = _a[1];\n      var scale = this.ribbonScale;\n      return [scale.map(min), scale.map(max)];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"selection\", {\n    get: function () {\n      var _a = this.range,\n        min = _a.min,\n        max = _a.max;\n      var _b = this.attributes.defaultValue,\n        _c = _b === void 0 ? [min, max] : _b,\n        _d = __read(_c, 2),\n        start = _d[0],\n        end = _d[1];\n      return [start, end];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.ifHorizontal = function (a, b) {\n    return ifHorizontal(this.attributes.orientation, typeof a === 'function' ? a() : a, typeof b === 'function' ? b() : b);\n  };\n  Continuous.prototype.renderTitle = function (container) {\n    var _a = this.attributes,\n      showTitle = _a.showTitle,\n      titleText = _a.titleText,\n      width = _a.width,\n      height = _a.height;\n    var style = subStyleProps(this.attributes, 'title');\n    var finalTitleStyle = __assign(__assign({}, style), {\n      width: width,\n      height: height,\n      text: titleText\n    });\n    var that = this;\n    container.selectAll(CLASS_NAMES.title.class).data(showTitle ? [titleText] : []).join(function (enter) {\n      return enter.append(function () {\n        return new Title({\n          style: finalTitleStyle\n        });\n      }).attr('className', CLASS_NAMES.title.name).each(function () {\n        that.title = this;\n      });\n    }, function (update) {\n      return update.update(finalTitleStyle);\n    }, function (exit) {\n      return exit.each(function () {\n        that.title = undefined;\n      }).remove();\n    });\n  };\n  Object.defineProperty(Continuous.prototype, \"availableSpace\", {\n    get: function () {\n      if (this.title) return this.title.getAvailableSpace();\n      var _a = this.attributes,\n        width = _a.width,\n        height = _a.height;\n      return new BBox(0, 0, width, height);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"labelFixedSpacing\", {\n    get: function () {\n      var showTick = this.attributes.showTick;\n      return showTick ? 5 : 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"labelPosition\", {\n    get: function () {\n      var _a = this.attributes,\n        orientation = _a.orientation,\n        labelDirection = _a.labelDirection;\n      var positions = {\n        vertical: {\n          positive: 'right',\n          negative: 'left'\n        },\n        horizontal: {\n          positive: 'bottom',\n          negative: 'top'\n        }\n      };\n      return positions[orientation][labelDirection];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"labelBBox\", {\n    get: function () {\n      var _a;\n      var showLabel = this.attributes.showLabel;\n      if (!showLabel) return new BBox(0, 0, 0, 0);\n      if (this.cacheLabelBBox) return this.cacheLabelBBox;\n      var _b = ((_a = this.label.querySelector(AXIS_CLASS_NAMES.labelGroup.class)) === null || _a === void 0 ? void 0 : _a.children.slice(-1)[0]).getBBox(),\n        width = _b.width,\n        height = _b.height;\n      this.cacheLabelBBox = new BBox(0, 0, width, height);\n      return this.cacheLabelBBox;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"labelShape\", {\n    get: function () {\n      var _a = this.attributes,\n        showLabel = _a.showLabel,\n        _b = _a.labelSpacing,\n        labelSpacing = _b === void 0 ? 0 : _b;\n      if (!showLabel) return {\n        width: 0,\n        height: 0,\n        size: 0,\n        length: 0\n      };\n      var _c = this.labelBBox,\n        width = _c.width,\n        height = _c.height;\n      var size = this.ifHorizontal(height, width) + labelSpacing + this.labelFixedSpacing;\n      var length = this.ifHorizontal(width, height);\n      return {\n        width: width,\n        height: height,\n        size: size,\n        length: length\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"ribbonBBox\", {\n    get: function () {\n      var _a = this.attributes,\n        showHandle = _a.showHandle,\n        userDefinedRibbonSize = _a.ribbonSize;\n      var _b = this.availableSpace,\n        availableWidth = _b.width,\n        availableHeight = _b.height;\n      var _c = this.labelShape,\n        labelSize = _c.size,\n        labelLength = _c.length;\n      var _d = __read(this.ifHorizontal([availableHeight, availableWidth], [availableWidth, availableHeight]), 2),\n        availableSize = _d[0],\n        availableLength = _d[1];\n      var _e = showHandle ? this.handleShape : {\n          size: 0,\n          length: 0\n        },\n        handleSize = _e.size,\n        handleLength = _e.length;\n      var handleRatio = this.handleOffsetRatio;\n      var ribbonSize = 0;\n      var labelPosition = this.labelPosition;\n      if (userDefinedRibbonSize) {\n        ribbonSize = userDefinedRibbonSize;\n      } else if (['bottom', 'right'].includes(labelPosition)) {\n        ribbonSize = Math.min(availableSize - labelSize, (availableSize - handleSize) / handleRatio);\n      } else if (availableSize * (1 - handleRatio) > handleSize) {\n        ribbonSize = Math.max(availableSize - labelSize, 0);\n      } else ribbonSize = Math.max((availableSize - labelSize - handleSize) / handleRatio, 0);\n      var edgeLength = Math.max(handleLength, labelLength);\n      var ribbonLength = availableLength - edgeLength;\n      var _f = __read(this.ifHorizontal([ribbonLength, ribbonSize], [ribbonSize, ribbonLength]), 2),\n        width = _f[0],\n        height = _f[1];\n      // 需要考虑 handle 的占用空间\n      // todo 为了防止因为 handle 文本变化导致的 ribbon 位置变化，handle size 取最大值\n      var finalLabelOccupy = ['top', 'left'].includes(labelPosition) ? labelSize : 0;\n      var _g = __read(this.ifHorizontal([edgeLength / 2, finalLabelOccupy], [finalLabelOccupy, edgeLength / 2]), 2),\n        x = _g[0],\n        y = _g[1];\n      return new BBox(x, y, width, height);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"ribbonShape\", {\n    get: function () {\n      var _a = this.ribbonBBox,\n        width = _a.width,\n        height = _a.height;\n      return this.ifHorizontal({\n        size: height,\n        length: width\n      }, {\n        size: width,\n        length: height\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.renderRibbon = function (container) {\n    var _a = this.attributes,\n      data = _a.data,\n      type = _a.type,\n      orientation = _a.orientation,\n      color = _a.color,\n      block = _a.block;\n    var ribbonStyle = subStyleProps(this.attributes, 'ribbon');\n    var _b = this.range,\n      min = _b.min,\n      max = _b.max;\n    var _c = this.ribbonBBox,\n      x = _c.x,\n      y = _c.y;\n    var _d = this.ribbonShape,\n      length = _d.length,\n      size = _d.size;\n    var style = deepAssign({\n      x: x,\n      y: y,\n      length: length,\n      size: size,\n      type: type,\n      orientation: orientation,\n      color: color,\n      block: block,\n      partition: data.map(function (d) {\n        return (d.value - min) / (max - min);\n      }),\n      range: this.ribbonRange\n    }, ribbonStyle);\n    this.ribbon = container.maybeAppendByClassName(CLASS_NAMES.ribbon, function () {\n      return new Ribbon({\n        style: style\n      });\n    }).update(style);\n  };\n  Continuous.prototype.getHandleClassName = function (type) {\n    // @ts-ignore\n    return \"\".concat(CLASS_NAMES.prefix(\"\".concat(type, \"-handle\")));\n  };\n  Continuous.prototype.renderHandles = function () {\n    var _a = this.attributes,\n      showHandle = _a.showHandle,\n      orientation = _a.orientation;\n    var handleStyle = subStyleProps(this.attributes, 'handle');\n    var _b = __read(this.selection, 2),\n      min = _b[0],\n      max = _b[1];\n    var style = __assign(__assign({}, handleStyle), {\n      orientation: orientation\n    });\n    var _c = handleStyle.shape,\n      shape = _c === void 0 ? 'slider' : _c;\n    var HandleCtor = shape === 'basic' ? Handle : SliderHandle;\n    var that = this;\n    this.handlesGroup.selectAll(CLASS_NAMES.handle.class).data(showHandle ? [{\n      value: min,\n      type: 'start'\n    }, {\n      value: max,\n      type: 'end'\n    }] : [], function (d) {\n      return d.type;\n    }).join(function (enter) {\n      return enter.append(function () {\n        return new HandleCtor({\n          style: style\n        });\n      }).attr('className', function (_a) {\n        var type = _a.type;\n        return \"\".concat(CLASS_NAMES.handle, \" \").concat(that.getHandleClassName(type));\n      }).each(function (_a) {\n        var type = _a.type,\n          labelText = _a.value;\n        this.update({\n          labelText: labelText\n        });\n        var name = \"\".concat(type, \"Handle\");\n        that[name] = this;\n        this.addEventListener('pointerdown', that.onDragStart(type));\n      });\n    }, function (update) {\n      return update.update(style).each(function (_a) {\n        var labelText = _a.value;\n        this.update({\n          labelText: labelText\n        });\n      });\n    }, function (exit) {\n      return exit.each(function (_a) {\n        var type = _a.type;\n        var name = \"\".concat(type, \"Handle\");\n        that[name] = undefined;\n      }).remove();\n    });\n  };\n  Continuous.prototype.adjustHandles = function () {\n    var _a = __read(this.selection, 2),\n      min = _a[0],\n      max = _a[1];\n    this.setHandlePosition('start', min);\n    this.setHandlePosition('end', max);\n  };\n  Continuous.prototype.adjustTitle = function () {\n    var _a = this.attributes,\n      titlePosition = _a.titlePosition,\n      orientation = _a.orientation;\n    var _b = __read(this.getElementsByClassName(CLASS_NAMES.title.name), 1),\n      title = _b[0];\n    var handle = this.handlesGroup.select(\".\".concat(this.getHandleClassName('start'))).node();\n    if (!title || !handle) return;\n    if (titlePosition !== 'top-left' || orientation !== 'horizontal') return;\n    var _c = __read(handle.getLocalBounds().min, 1),\n      handleX = _c[0];\n    var _d = __read(title.getLocalBounds().min, 1),\n      titleX = _d[0];\n    var diffX = handleX - titleX;\n    title.style.x = +(this.style.x || 0) + diffX;\n  };\n  Object.defineProperty(Continuous.prototype, \"handleBBox\", {\n    get: function () {\n      if (this.cacheHandleBBox) return this.cacheHandleBBox;\n      if (!this.attributes.showHandle) return new BBox(0, 0, 0, 0);\n      var _a = this.startHandle.getBBox(),\n        startHandleWidth = _a.width,\n        startHandleHeight = _a.height;\n      var _b = this.endHandle.getBBox(),\n        endHandleWidth = _b.width,\n        endHandleHeight = _b.height;\n      var _c = __read([Math.max(startHandleWidth, endHandleWidth), Math.max(startHandleHeight, endHandleHeight)], 2),\n        width = _c[0],\n        height = _c[1];\n      this.cacheHandleBBox = new BBox(0, 0, width, height);\n      return this.cacheHandleBBox;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"handleShape\", {\n    /**\n     *  因为 handle label 的宽高是动态的，所以 handle bbox 是第一次渲染时的 bbox\n     */\n    get: function () {\n      var _a = this.handleBBox,\n        width = _a.width,\n        height = _a.height;\n      var _b = __read(this.ifHorizontal([height, width], [width, height]), 2),\n        size = _b[0],\n        length = _b[1];\n      return {\n        width: width,\n        height: height,\n        size: size,\n        length: length\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.setHandlePosition = function (type, value) {\n    var handleFormatter = this.attributes.handleFormatter;\n    var _a = this.ribbonBBox,\n      ribbonX = _a.x,\n      ribbonY = _a.y;\n    var ribbonSize = this.ribbonShape.size;\n    var offset = this.getOffset(value);\n    var _b = __read(this.ifHorizontal([ribbonX + offset, ribbonY + ribbonSize * this.handleOffsetRatio], [ribbonX + ribbonSize * this.handleOffsetRatio, ribbonY + offset]), 2),\n      x = _b[0],\n      y = _b[1];\n    var handle = this.handlesGroup.select(\".\".concat(this.getHandleClassName(type))).node();\n    handle === null || handle === void 0 ? void 0 : handle.update({\n      x: x,\n      y: y,\n      formatter: handleFormatter\n    });\n  };\n  Continuous.prototype.renderIndicator = function (container) {\n    var style = subStyleProps(this.attributes, 'indicator');\n    this.indicator = container.maybeAppendByClassName(CLASS_NAMES.indicator, function () {\n      return new Indicator({});\n    }).update(style);\n    // this.hideIndicator();\n  };\n  Object.defineProperty(Continuous.prototype, \"labelData\", {\n    get: function () {\n      var _this = this;\n      var data = this.attributes.data;\n      return data.reduce(function (acc, curr, index, arr) {\n        var _a, _b;\n        var id = (_a = curr === null || curr === void 0 ? void 0 : curr.id) !== null && _a !== void 0 ? _a : index.toString();\n        acc.push(__assign(__assign({}, curr), {\n          id: id,\n          index: index,\n          type: 'value',\n          label: (_b = curr === null || curr === void 0 ? void 0 : curr.label) !== null && _b !== void 0 ? _b : curr.value.toString(),\n          value: _this.ribbonScale.map(curr.value)\n        }));\n        if (index < arr.length - 1) {\n          var next = arr[index + 1];\n          var _c = __read([curr.value, next.value], 2),\n            cr = _c[0],\n            nx = _c[1];\n          var midVal = (cr + nx) / 2;\n          acc.push(__assign(__assign({}, curr), {\n            id: id,\n            index: index,\n            type: 'range',\n            range: [cr, nx],\n            label: [cr, nx].join('~'),\n            value: _this.ribbonScale.map(midVal)\n          }));\n        }\n        return acc;\n      }, []);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Continuous.prototype, \"labelStyle\", {\n    get: function () {\n      var _a = __read(['center', 'middle'], 2),\n        labelTextAlign = _a[0],\n        labelTextBaseline = _a[1];\n      var labelPosition = this.labelPosition;\n      if (labelPosition === 'top') labelTextBaseline = 'bottom';else if (labelPosition === 'bottom') labelTextBaseline = 'top';else if (labelPosition === 'left') labelTextAlign = 'end';else if (labelPosition === 'right') labelTextAlign = 'start';\n      return {\n        labelTextAlign: labelTextAlign,\n        labelTextBaseline: labelTextBaseline\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.renderLabel = function (container) {\n    var _a = this.attributes,\n      _b = _a.showTick,\n      showTick = _b === void 0 ? false : _b,\n      labelFilter = _a.labelFilter,\n      labelFormatter = _a.labelFormatter;\n    var tickStyle = subStyleProps(this.attributes, 'tick');\n    var labelStyle = subStyleProps(this.attributes, 'label');\n    var align = labelStyle.align;\n    var style = deepAssign(__assign({\n      showLine: false,\n      showGrid: false,\n      showTick: showTick,\n      type: 'linear',\n      startPos: [0, 0],\n      endPos: [0, 0],\n      tickDirection: 'negative',\n      labelTransform: 'rotate(0)'\n    }, this.labelStyle), superStyleProps(tickStyle, 'tick'), superStyleProps(labelStyle, 'label'), {\n      data: this.labelData\n    });\n    var functionStyle = {\n      tickFilter: function (datum, index, data) {\n        if ((datum === null || datum === void 0 ? void 0 : datum.type) !== 'value') return false;\n        if (labelFilter) return labelFilter(datum, datum.index, data.filter(function (d) {\n          return d.type !== 'value';\n        }));\n        return true;\n      },\n      labelFilter: function (datum, index, data) {\n        if ((datum === null || datum === void 0 ? void 0 : datum.type) !== align) return false;\n        if (labelFilter) return labelFilter(datum, datum.index, data.filter(function (d) {\n          return d.type === align;\n        }));\n        return true;\n      },\n      labelFormatter: labelFormatter\n    };\n    var finalLabelStyle = __assign(__assign(__assign({}, style), functionStyle), {\n      labelOverlap: [{\n        type: 'hide'\n      }]\n    });\n    this.label = container.maybeAppendByClassName(CLASS_NAMES.label, function () {\n      return new Axis({\n        style: finalLabelStyle\n      });\n    }).node();\n    this.label.update(finalLabelStyle, false);\n  };\n  Object.defineProperty(Continuous.prototype, \"labelAxisStyle\", {\n    get: function () {\n      // @ts-ignore\n      var _a = this.attributes,\n        showTick = _a.showTick,\n        labelDirection = _a.labelDirection,\n        labelSpacing = _a.labelSpacing,\n        definedTickLength = _a.tickLength;\n      var ribbonSize = this.ribbonShape.size;\n      var labelPosition = this.labelPosition;\n      var labelFixedSpacing = this.labelFixedSpacing;\n      var _b = __read([0, 0, 0], 3),\n        offset = _b[0],\n        spacing = _b[1],\n        tickLength = _b[2];\n      var internalVal = definedTickLength !== null && definedTickLength !== void 0 ? definedTickLength : ribbonSize;\n      if (showTick) {\n        tickLength = internalVal;\n        spacing = labelFixedSpacing;\n        if (labelDirection === 'positive') {\n          if (labelPosition === 'right') {\n            offset = internalVal;\n            tickLength = internalVal;\n          } else if (labelPosition === 'bottom') offset = tickLength;\n        } else if (labelDirection === 'negative') {\n          if (labelPosition === 'top') offset = ribbonSize;else if (labelPosition === 'left') offset = ribbonSize;\n        }\n      } else if (labelDirection === 'positive') {\n        if (labelPosition === 'right') spacing = internalVal;else if (labelPosition === 'bottom') {\n          offset = ribbonSize + labelFixedSpacing;\n          spacing = labelSpacing;\n        }\n      } else if (labelDirection === 'negative') {\n        if (labelPosition === 'left') spacing = labelSpacing;else if (labelPosition === 'top') spacing = labelSpacing;\n      }\n      return {\n        offset: offset,\n        spacing: labelSpacing,\n        tickLength: tickLength\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.adjustLabel = function () {\n    var showLabel = this.attributes.showLabel;\n    if (!showLabel) return;\n    var _a = this.ribbonBBox,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height;\n    var _b = this.labelAxisStyle,\n      axisOffset = _b.offset,\n      axisSpacing = _b.spacing,\n      axisTickLength = _b.tickLength;\n    var _c = __read(this.ifHorizontal([[x, y + axisOffset], [x + width, y + axisOffset]], [[x + axisOffset, y + height], [x + axisOffset, y]]), 2),\n      startPos = _c[0],\n      endPos = _c[1];\n    this.label.update({\n      startPos: startPos,\n      endPos: endPos,\n      tickLength: axisTickLength,\n      labelSpacing: axisSpacing\n    }, false);\n  };\n  Continuous.prototype.bindEvents = function () {\n    this.style.cursor = 'pointer';\n    // 绑定 drag 开始事件\n    this.ribbon.on('pointerdown', this.onDragStart('ribbon'));\n    this.ribbon.on('pointermove', this.onHovering);\n    this.addEventListener('pointerout', this.hideIndicator);\n  };\n  Continuous.prototype.showIndicator = function (value, text) {\n    if (text === void 0) {\n      text = \"\".concat(value);\n    }\n    var showIndicator = this.attributes.showIndicator;\n    if (!showIndicator || typeof value !== 'number') {\n      this.hideIndicator();\n      return;\n    }\n    var _a = this.range,\n      min = _a.min,\n      max = _a.max;\n    var _b = this.ribbonBBox,\n      x = _b.x,\n      y = _b.y;\n    var safeValue = clamp(value, min, max);\n    var offset = this.getOffset(safeValue);\n    var pos = this.ifHorizontal([offset + x, y], [x, offset + y]);\n    this.indicator.update({\n      x: pos[0],\n      y: pos[1],\n      position: this.ifHorizontal('top', 'left'),\n      labelText: text\n    });\n    show(this.indicator.node());\n  };\n  Continuous.prototype.hideIndicator = function () {\n    hide(this.indicator.node());\n  };\n  Continuous.prototype.updateMouse = function () {\n    if (this.attributes.slidable) this.style.cursor = 'grabbing';\n  };\n  Continuous.prototype.setSelection = function (start, end) {\n    this.updateSelection(start, end);\n  };\n  Continuous.prototype.updateSelection = function (stVal, endVal, isOffset) {\n    var _a;\n    if (isOffset === void 0) {\n      isOffset = false;\n    }\n    var _b = __read(this.selection, 2),\n      currSt = _b[0],\n      currEnd = _b[1];\n    var _c = __read([stVal, endVal], 2),\n      start = _c[0],\n      end = _c[1];\n    if (isOffset) {\n      // 获取当前值\n      start += currSt;\n      end += currEnd;\n    }\n    // 值校验\n    var _d = this.range,\n      min = _d.min,\n      max = _d.max;\n    _a = __read(getSafetySelections([min, max], [start, end], this.selection), 2), start = _a[0], end = _a[1];\n    this.update({\n      defaultValue: [start, end]\n    });\n    this.dispatchSelection();\n  };\n  Object.defineProperty(Continuous.prototype, \"step\", {\n    get: function () {\n      var _a = this.attributes.step,\n        step = _a === void 0 ? 1 : _a;\n      var _b = this.range,\n        min = _b.min,\n        max = _b.max;\n      if (isUndefined(step)) return toPrecision((max - min) * STEP_RATIO, 0);\n      return step;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Continuous.prototype.getTickValue = function (value) {\n    var _a = this.attributes,\n      data = _a.data,\n      block = _a.block;\n    var min = this.range.min;\n    if (block) return getNextTickValue(data.map(function (_a) {\n      var value = _a.value;\n      return value;\n    }), value).tick;\n    return getStepValueByValue(value, this.step, min);\n  };\n  /**\n   * 事件触发的位置对应的value值\n   * @param limit {boolean} 我也忘了要干啥了\n   */\n  Continuous.prototype.getValueByCanvasPoint = function (e, limit) {\n    if (limit === void 0) {\n      limit = false;\n    }\n    var _a = this.range,\n      min = _a.min,\n      max = _a.max;\n    var _b = __read(this.ribbon.node().getPosition(), 2),\n      x = _b[0],\n      y = _b[1];\n    var startPos = this.ifHorizontal(x, y);\n    var currValue = this.ifHorizontal.apply(this, __spreadArray([], __read(getEventPos(e)), false));\n    var offset = currValue - startPos;\n    var value = clamp(this.getOffset(offset, true), min, max);\n    return value;\n  };\n  /** reverse: 屏幕偏移量 -> 值 */\n  Continuous.prototype.getOffset = function (value, reverse) {\n    if (reverse === void 0) {\n      reverse = false;\n    }\n    var _a = this.range,\n      min = _a.min,\n      max = _a.max;\n    var ribbonLen = this.ribbonShape.length;\n    var scale = this.eventToOffsetScale;\n    scale.update({\n      domain: [min, max],\n      range: [0, ribbonLen]\n    });\n    if (reverse) return scale.invert(value);\n    return scale.map(value);\n  };\n  Continuous.prototype.dispatchSelection = function () {\n    var evt = new CustomEvent('valuechange', {\n      detail: {\n        value: this.selection\n      }\n    });\n    this.dispatchEvent(evt);\n  };\n  Continuous.prototype.dispatchIndicated = function (value, range) {\n    var evt = new CustomEvent('indicate', {\n      detail: {\n        value: value,\n        range: range\n      }\n    });\n    this.dispatchEvent(evt);\n  };\n  return Continuous;\n}(Component);\nexport { Continuous };","map":{"version":3,"names":["CustomEvent","Linear","clamp","isUndefined","Component","BBox","deepAssign","getEventPos","hide","ifShow","select","show","subStyleProps","superStyleProps","toPrecision","Axis","CLASS_NAMES","AXIS_CLASS_NAMES","Indicator","Handle","SliderHandle","Title","CONTINUOUS_DEFAULT_OPTIONS","STEP_RATIO","Ribbon","getNextTickValue","getSafetySelections","getStepValueByValue","ifHorizontal","getMinMax","data","min","Math","apply","__spreadArray","__read","map","d","value","max","Continuous","_super","__extends","options","_this","call","eventToOffsetScale","innerRibbonScale","cacheLabelBBox","cacheHandleBBox","onHovering","e","_a","attributes","block","stopPropagation","getValueByCanvasPoint","range","showIndicator","concat","dispatchIndicated","safetyValue","getTickValue","onDragStart","target","slidable","prevValue","document","addEventListener","onDragging","onDragEnd","updateMouse","selection","start","end","currValue","diffValue","updateSelection","style","cursor","removeEventListener","Object","defineProperty","prototype","get","getBBox","width","height","render","container","showLabel","renderTitle","availableSpace","x","y","contentGroup","maybeAppendByClassName","styles","labelGroup","zIndex","group","renderLabel","ribbonGroup","handlesGroup","renderHandles","renderRibbon","renderIndicator","adjustLabel","adjustHandles","domain","update","scale","ribbonScale","_b","defaultValue","_c","_d","a","b","orientation","showTitle","titleText","finalTitleStyle","__assign","text","that","selectAll","title","class","join","enter","append","attr","name","each","exit","undefined","remove","getAvailableSpace","showTick","labelDirection","positions","vertical","positive","negative","horizontal","label","querySelector","children","slice","labelSpacing","size","length","labelBBox","labelFixedSpacing","showHandle","userDefinedRibbonSize","ribbonSize","availableWidth","availableHeight","labelShape","labelSize","labelLength","availableSize","availableLength","_e","handleShape","handleSize","handleLength","handleRatio","handleOffsetRatio","labelPosition","includes","edgeLength","ribbonLength","_f","finalLabelOccupy","_g","ribbonBBox","type","color","ribbonStyle","ribbonShape","partition","ribbonRange","ribbon","getHandleClassName","prefix","handleStyle","shape","HandleCtor","handle","labelText","setHandlePosition","adjustTitle","titlePosition","getElementsByClassName","node","getLocalBounds","handleX","titleX","diffX","startHandle","startHandleWidth","startHandleHeight","endHandle","endHandleWidth","endHandleHeight","handleBBox","handleFormatter","ribbonX","ribbonY","offset","getOffset","formatter","indicator","reduce","acc","curr","index","arr","id","toString","push","next","cr","nx","midVal","labelTextAlign","labelTextBaseline","labelFilter","labelFormatter","tickStyle","labelStyle","align","showLine","showGrid","startPos","endPos","tickDirection","labelTransform","labelData","functionStyle","tickFilter","datum","filter","finalLabelStyle","labelOverlap","definedTickLength","tickLength","spacing","internalVal","labelAxisStyle","axisOffset","axisSpacing","axisTickLength","bindEvents","on","hideIndicator","safeValue","pos","position","setSelection","stVal","endVal","isOffset","currSt","currEnd","dispatchSelection","step","tick","limit","getPosition","reverse","ribbonLen","invert","evt","detail","dispatchEvent"],"sources":["ui/legend/continuous.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}